## ğŸ› é—®é¢˜æè¿°

åœ¨å¼¹çª—æ¨¡å¼å’Œé˜…è¯»æ¸…å•æ¨¡å¼ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œæ¨èæ¡ç›®çš„ URL å¤„ç†å­˜åœ¨æ··ä¹±ï¼š

1. **åˆ‡æ¢åˆ°é˜…è¯»æ¸…å•æ¨¡å¼æ—¶**ï¼š
   - æ¨èæ¡ç›®ä¼šè¢«è½¬ç§»åˆ°é˜…è¯»æ¸…å•
   - ä½†é“¾æ¥ç±»å‹ï¼ˆç¿»è¯‘/åŸæ–‡ï¼‰å‡ºç°é”™è¯¯
   - åº”ä½¿ç”¨ç¿»è¯‘é“¾æ¥çš„åè€Œä½¿ç”¨åŸæ–‡é“¾æ¥
   - ä¸è¯¥ä½¿ç”¨ç¿»è¯‘é“¾æ¥çš„åè€Œä½¿ç”¨äº†ç¿»è¯‘é“¾æ¥

2. **å†æ¬¡åˆ‡æ¢å›å¼¹çª—æ¨¡å¼æ—¶**ï¼š
   - è¿™äº›æ¡ç›®ä»é˜…è¯»æ¸…å•æ¶ˆå¤±
   - æ¨èä¹Ÿæœªèƒ½æ­£ç¡®æ¢å¤åˆ°å¼¹çª—

## ğŸ” æ ¹æœ¬åŸå› 

åœ¨ `background.ts` çš„ `DELIVERY_MODE_CHANGED` æ¶ˆæ¯å¤„ç†ä¸­ï¼š

```typescript
for (const rec of activeRecs) {
  try {
    const ok = await ReadingListManager.saveRecommendation(rec, autoTranslate, interfaceLanguage, autoAddedPrefix)
    // ...
  }
}
```

`saveRecommendation` æ–¹æ³•å†…éƒ¨ä¼šï¼š
1. é‡æ–°æŸ¥è¯¢è®¢é˜…æºçš„ç¿»è¯‘è®¾ç½®ï¼ˆ`useGoogleTranslate`ï¼‰
2. åŸºäºæ–°æŸ¥è¯¢çš„è®¾ç½®é‡æ–°å†³ç­– URLï¼ˆç¿»è¯‘é“¾æ¥ vs åŸæ–‡é“¾æ¥ï¼‰

**é—®é¢˜**ï¼šæ¯æ¬¡æŸ¥è¯¢çš„è®¢é˜…æºè®¾ç½®å¯èƒ½ä¸æ¨èç”Ÿæˆæ—¶ä¸ä¸€è‡´ï¼Œå¯¼è‡´ URL å†³ç­–é”™è¯¯ã€‚ä¾‹å¦‚ï¼š
- æ¨èç”Ÿæˆæ—¶è®¢é˜…æºå…è®¸ç¿»è¯‘ â†’ ç”Ÿæˆäº†ç¿»è¯‘é“¾æ¥
- æ¨¡å¼åˆ‡æ¢æ—¶é‡æ–°æŸ¥è¯¢å‘ç°è®¢é˜…æºç¦ç”¨ç¿»è¯‘ â†’ ä½¿ç”¨åŸæ–‡é“¾æ¥ âŒ
- ç»“æœï¼šé“¾æ¥ç±»å‹ä¸ä¸€è‡´ï¼Œå¯¼è‡´æŸ¥è¯¢å¤±è´¥å’Œæ¡ç›®ä¸¢å¤±

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ä¸º `saveRecommendation` æ·»åŠ å¯é€‰å‚æ•°

åœ¨ [reading-list-manager.ts](src/core/reading-list/reading-list-manager.ts) ä¸­ï¼š

```typescript
static async saveRecommendation(
  recommendation: Recommendation,
  autoTranslateEnabled: boolean = false,
  interfaceLanguage: string = 'zh-CN',
  titlePrefix: string = 'ğŸ¤« ',
  feedUseGoogleTranslate?: boolean  // æ–°å¢å¯é€‰å‚æ•°
): Promise<boolean>
```

- å…è®¸è°ƒç”¨è€…ç›´æ¥ä¼ å…¥è®¢é˜…æºçš„ç¿»è¯‘è®¾ç½®
- å¦‚æœä¼ å…¥ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ï¼Œé¿å…é‡å¤æŸ¥è¯¢
- å¦‚æœæœªä¼ å…¥ï¼Œåˆ™å›é€€åˆ°åŸæœ‰çš„æŸ¥è¯¢é€»è¾‘ï¼ˆå‘åå…¼å®¹ï¼‰

### 2. æ‰¹é‡é¢„æŸ¥è¯¢è®¢é˜…æºè®¾ç½®

åœ¨ [background.ts](src/background.ts) çš„ `DELIVERY_MODE_CHANGED` å¤„ç†ä¸­ï¼š

```typescript
// æ‰¹é‡è·å–æ‰€æœ‰è®¢é˜…æºçš„ç¿»è¯‘è®¾ç½®ï¼Œé¿å…é‡å¤æŸ¥è¯¢å’Œå†³ç­–ä¸ä¸€è‡´
const feedManager = new FeedManager()
const feedTranslateSettings = new Map<string, boolean>()

// æ”¶é›†æ‰€æœ‰å”¯ä¸€çš„ sourceUrl
const uniqueSourceUrls = [...new Set(activeRecs.map(r => r.sourceUrl).filter(Boolean))] as string[]

// æ‰¹é‡æŸ¥è¯¢è®¢é˜…æºè®¾ç½®
for (const sourceUrl of uniqueSourceUrls) {
  try {
    const feed = await feedManager.getFeedByUrl(sourceUrl)
    if (feed) {
      feedTranslateSettings.set(sourceUrl, feed.useGoogleTranslate !== false)
    }
  } catch (err) {
    feedTranslateSettings.set(sourceUrl, true) // é»˜è®¤å…è®¸ç¿»è¯‘
  }
}
```

### 3. è½¬ç§»æ—¶ä¼ å…¥è®¢é˜…æºè®¾ç½®

```typescript
for (const rec of activeRecs) {
  try {
    // è·å–è¯¥æ¨èå¯¹åº”çš„è®¢é˜…æºç¿»è¯‘è®¾ç½®
    const feedUseGoogleTranslate = rec.sourceUrl 
      ? (feedTranslateSettings.get(rec.sourceUrl) ?? true)
      : true
    
    const ok = await ReadingListManager.saveRecommendation(
      rec, 
      autoTranslate, 
      interfaceLanguage, 
      autoAddedPrefix,
      feedUseGoogleTranslate // ä¼ å…¥è®¢é˜…æºç¿»è¯‘è®¾ç½®
    )
    if (ok) transferred++
  } catch (err) {
    bgLogger.warn('è½¬ç§»åˆ°é˜…è¯»åˆ—è¡¨å¤±è´¥ï¼ˆå¿½ç•¥ï¼‰', { id: rec.id, err })
  }
}
```

## ğŸ§ª æµ‹è¯•éªŒè¯

- âœ… æ‰€æœ‰ `reading-list` æµ‹è¯•é€šè¿‡ï¼ˆ59 ä¸ªæµ‹è¯•ï¼‰
- âœ… `background` æµ‹è¯•é€šè¿‡ï¼ˆ5 ä¸ªæµ‹è¯•ï¼‰
- âœ… URL è§„èŒƒåŒ–æµ‹è¯•è¦†ç›–å¤šç§ç¿»è¯‘é“¾æ¥æ ¼å¼
- âœ… æ¨¡å¼åˆ‡æ¢æµ‹è¯•éªŒè¯ Bug #2 ä¿®å¤

## ğŸ“‹ å½±å“èŒƒå›´

- **æ ¸å¿ƒä¿®æ”¹**ï¼š
  - `src/core/reading-list/reading-list-manager.ts`: æ·»åŠ å¯é€‰å‚æ•°ï¼Œä¼˜åŒ–è®¢é˜…æºè®¾ç½®æŸ¥è¯¢é€»è¾‘
  - `src/background.ts`: æ‰¹é‡é¢„æŸ¥è¯¢è®¢é˜…æºè®¾ç½®ï¼Œç¡®ä¿æ¨¡å¼åˆ‡æ¢æ—¶ URL å†³ç­–ä¸€è‡´

- **å‘åå…¼å®¹**ï¼š
  - æ–°å‚æ•°ä¸ºå¯é€‰ï¼Œç°æœ‰è°ƒç”¨æ— éœ€ä¿®æ”¹
  - æœªä¼ å…¥å‚æ•°æ—¶ä¿æŒåŸæœ‰è¡Œä¸º

- **æ€§èƒ½ä¼˜åŒ–**ï¼š
  - æ‰¹é‡æŸ¥è¯¢è®¢é˜…æºè®¾ç½®ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°
  - é¿å…æ¨¡å¼åˆ‡æ¢æ—¶é‡å¤æŸ¥è¯¢åŒä¸€è®¢é˜…æº

## ğŸ”— ç›¸å…³

- å…³è” PR #108ï¼ˆä¹‹å‰çš„é˜…è¯»æ¸…å•ä¿®å¤ï¼‰
- ä¿®å¤äº† PR #108 æœªå®Œå…¨è§£å†³çš„æ¨¡å¼åˆ‡æ¢é—®é¢˜

---

è¿™æ˜¯ä¸€ä¸ª **bug ä¿®å¤**ï¼ˆpatch çº§åˆ«ï¼‰ï¼Œè§£å†³äº†é˜…è¯»æ¸…å•æ¨¡å¼åˆ‡æ¢æ—¶çš„ URL æ··ä¹±é—®é¢˜ã€‚
