<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­—ä½“æ£€æµ‹å·¥å…· - æ‰¾åˆ°è¡Œæ¥·çš„çœŸå®åç§°</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 40px;
            background: #f5f5f5;
            max-width: 1200px;
            margin: 0 auto;
        }
        .result {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        .font-sample {
            font-size: 28px;
            margin: 10px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
            color: #e74c3c;
        }
        h1 { color: #2c3e50; }
        h2 { color: #34495e; margin-top: 40px; }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .test-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        .test-item.matched {
            border-color: #28a745;
            background: #d4edda;
        }
        .font-name {
            font-size: 12px;
            color: #666;
            font-family: monospace;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” å­—ä½“æ£€æµ‹å·¥å…·</h1>
    
    <div class="info">
        <strong>ç›®æ ‡ï¼š</strong>æ‰¾åˆ°"è¡Œæ¥·-ç®€"åœ¨ CSS ä¸­çš„æ­£ç¡®åç§°<br>
        <strong>æ–¹æ³•ï¼š</strong>é€šè¿‡ç”»å¸ƒæ¸²æŸ“æµ‹è¯•ï¼Œæ£€æµ‹å­—ä½“æ˜¯å¦çœŸçš„è¢«åŠ è½½
    </div>

    <h2>æ­¥éª¤1: æ£€æµ‹ç³»ç»Ÿå­—ä½“</h2>
    <div id="detection-results"></div>

    <h2>æ­¥éª¤2: æ‰¹é‡æµ‹è¯•è¡Œæ¥·å¯èƒ½çš„åç§°</h2>
    <div class="test-grid" id="xingkai-tests"></div>

    <h2>æ­¥éª¤3: è§†è§‰å¯¹æ¯”</h2>
    <div id="visual-tests"></div>

    <script>
        // ç²¾ç¡®çš„å­—ä½“æ£€æµ‹å‡½æ•°
        function detectFont(fontName) {
            const testString = 'æµ‹è¯•è¡Œæ¥·å­—ä½“ï¼Œç¬”ç”»åº”è¯¥è¿è´¯æµç•…ã€‚0123456789';
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            
            // ä½¿ç”¨é»˜è®¤å­—ä½“æµ‹é‡
            context.font = '72px monospace';
            const baselineWidth = context.measureText(testString).width;
            
            // ä½¿ç”¨å¾…æµ‹å­—ä½“æµ‹é‡
            context.font = `72px "${fontName}", monospace`;
            const testWidth = context.measureText(testString).width;
            
            // å¦‚æœå®½åº¦ä¸åŒï¼Œè¯´æ˜å­—ä½“è¢«åŠ è½½äº†
            return {
                available: Math.abs(testWidth - baselineWidth) > 1,
                baselineWidth,
                testWidth,
                difference: Math.abs(testWidth - baselineWidth)
            };
        }

        // æ‰€æœ‰å¯èƒ½çš„è¡Œæ¥·å­—ä½“åç§°
        const xingkaiVariants = [
            // PostScript åç§°å˜ä½“
            'STXingkai-SC-Light',
            'STXingkai-SC-Regular',
            'STXingkai-SC-Bold',
            'STXingkai',
            'Xingkai-SC',
            'XingkaiSC-Light',
            'XingkaiSC-Regular',
            'STXingkai-Light',
            'STXingkai-Regular',
            
            // å®Œæ•´åç§°
            'Xingkai SC Light',
            'Xingkai SC Regular',
            'ST Xingkai',
            'STXingkai SC',
            
            // ä¸­æ–‡åç§°
            'è¡Œæ¥·-ç®€',
            'è¡Œæ¥·',
            'åæ–‡è¡Œæ¥·',
            'STXingkai-ç®€',
            
            // å…¶ä»–å¯èƒ½
            'XingKai',
            'XingKai SC',
            'xingkai',
            'STXINGKAI'
        ];

        // æ¥·ä½“ä½œä¸ºå¯¹æ¯”
        const kaitiVariants = [
            'STKaiti-SC-Regular',
            'STKaiti-SC-Light',
            'STKaiti',
            'Kaiti-SC',
            'Kaiti SC',
            'KaiTi',
            'æ¥·ä½“-ç®€',
            'æ¥·ä½“',
            'åæ–‡æ¥·ä½“'
        ];

        // æ‰§è¡Œæ£€æµ‹
        console.log('=== å¼€å§‹å­—ä½“æ£€æµ‹ ===');
        
        const detectionDiv = document.getElementById('detection-results');
        const xingkaiDiv = document.getElementById('xingkai-tests');
        const visualDiv = document.getElementById('visual-tests');

        // æ£€æµ‹è¡Œæ¥·
        let foundXingkai = [];
        xingkaiVariants.forEach(font => {
            const result = detectFont(font);
            const div = document.createElement('div');
            div.className = 'test-item' + (result.available ? ' matched' : '');
            div.innerHTML = `
                <div class="font-name">${font}</div>
                <div style="font-size: 11px; color: ${result.available ? '#28a745' : '#dc3545'}">
                    ${result.available ? 'âœ… å¯ç”¨' : 'âŒ ä¸å¯ç”¨'} 
                    (å·®å¼‚: ${result.difference.toFixed(1)}px)
                </div>
            `;
            xingkaiDiv.appendChild(div);
            
            if (result.available) {
                foundXingkai.push(font);
                console.log(`âœ… æ‰¾åˆ°è¡Œæ¥·: ${font}`, result);
            }
        });

        // æ£€æµ‹æ¥·ä½“
        let foundKaiti = [];
        kaitiVariants.forEach(font => {
            const result = detectFont(font);
            if (result.available) {
                foundKaiti.push(font);
                console.log(`âœ… æ‰¾åˆ°æ¥·ä½“: ${font}`, result);
            }
        });

        // æ˜¾ç¤ºç»“æœ
        if (foundXingkai.length > 0) {
            detectionDiv.innerHTML = `
                <div class="result success">
                    <h3>ğŸ‰ æ‰¾åˆ° ${foundXingkai.length} ä¸ªè¡Œæ¥·å­—ä½“ï¼</h3>
                    <p><strong>æ¨èä½¿ç”¨ç¬¬ä¸€ä¸ª:</strong> <code>${foundXingkai[0]}</code></p>
                    <p><strong>æ‰€æœ‰å¯ç”¨çš„:</strong></p>
                    <ul>
                        ${foundXingkai.map(f => `<li><code>${f}</code></li>`).join('')}
                    </ul>
                    <p style="margin-top: 20px; padding: 10px; background: #fff3cd; border-radius: 4px;">
                        <strong>ğŸ“ å¤åˆ¶è¿™ä¸ªé…ç½®åˆ° sketchy.css:</strong><br>
                        <code style="display: block; margin-top: 5px; padding: 10px; background: white;">
                        --sketchy-font-zh: '${foundXingkai[0]}', '${foundKaiti[0] || 'serif'}', serif;
                        </code>
                    </p>
                </div>
            `;
        } else {
            detectionDiv.innerHTML = `
                <div class="result warning">
                    <h3>âš ï¸ æœªæ‰¾åˆ°è¡Œæ¥·å­—ä½“</h3>
                    <p>å¯èƒ½çš„åŸå› :</p>
                    <ul>
                        <li>å­—ä½“åç§°ä¸åœ¨æµ‹è¯•åˆ—è¡¨ä¸­</li>
                        <li>éœ€è¦ç”¨ä¸åŒçš„æ–¹æ³•æ£€æµ‹</li>
                        <li>ç³»ç»Ÿä¸­å¯èƒ½æ²¡æœ‰è¡Œæ¥·å­—ä½“</li>
                    </ul>
                    <p>æ‰¾åˆ°çš„æ¥·ä½“: ${foundKaiti.length > 0 ? `<code>${foundKaiti[0]}</code>` : 'æ— '}</p>
                </div>
            `;
        }

        // è§†è§‰æµ‹è¯•
        if (foundXingkai.length > 0) {
            visualDiv.innerHTML = `
                <div class="result">
                    <h3>è§†è§‰å¯¹æ¯” - ç¡®è®¤æ˜¯è¡Œæ¥·è¿˜æ˜¯æ¥·ä½“</h3>
                    
                    <div style="margin: 20px 0;">
                        <strong>ä½¿ç”¨ ${foundXingkai[0]}:</strong>
                        <div class="font-sample" style="font-family: '${foundXingkai[0]}', serif;">
                            Feed AI Muter - RSS é™éŸ³å™¨ - æ¬¢è¿ä½¿ç”¨ï¼ç»§ç»­æµè§ˆä»¥å­¦ä¹ ä½ çš„å…´è¶£ã€‚è¡Œæ¥·çš„ç¬”ç”»åº”è¯¥è¿è´¯æµç•…ã€‚
                        </div>
                    </div>

                    ${foundKaiti.length > 0 ? `
                    <div style="margin: 20px 0;">
                        <strong>å¯¹æ¯” ${foundKaiti[0]} (æ¥·ä½“):</strong>
                        <div class="font-sample" style="font-family: '${foundKaiti[0]}', serif;">
                            Feed AI Muter - RSS é™éŸ³å™¨ - æ¬¢è¿ä½¿ç”¨ï¼ç»§ç»­æµè§ˆä»¥å­¦ä¹ ä½ çš„å…´è¶£ã€‚æ¥·ä½“çš„ç¬”ç”»å·¥æ•´ç‹¬ç«‹ã€‚
                        </div>
                    </div>
                    ` : ''}

                    <div style="margin: 20px 0;">
                        <strong>ç³»ç»Ÿé»˜è®¤ (å¯¹æ¯”å‚è€ƒ):</strong>
                        <div class="font-sample" style="font-family: -apple-system, sans-serif;">
                            Feed AI Muter - RSS é™éŸ³å™¨ - æ¬¢è¿ä½¿ç”¨ï¼ç»§ç»­æµè§ˆä»¥å­¦ä¹ ä½ çš„å…´è¶£ã€‚è‹¹æ–¹å­—ä½“æ–¹æ­£ç°ä»£ã€‚
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 4px;">
                        <strong>ğŸ” å¦‚ä½•åˆ¤æ–­:</strong>
                        <ul style="margin: 10px 0;">
                            <li><strong>è¡Œæ¥·:</strong> æŸäº›ç¬”ç”»ä¼šè¿åœ¨ä¸€èµ·ï¼Œåƒå¿«é€Ÿä¹¦å†™ï¼Œå­—å½¢ç•¥æ–œ</li>
                            <li><strong>æ¥·ä½“:</strong> æ¯ä¸ªç¬”ç”»ç‹¬ç«‹åˆ†ç¦»ï¼Œå·¥æ•´ç«¯æ­£ï¼Œåƒå°åˆ·ä½“</li>
                            <li><strong>è‹¹æ–¹:</strong> ç°ä»£å‡ ä½•æ„Ÿï¼Œç¬”ç”»ç²—ç»†å‡åŒ€</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        console.log('=== æ£€æµ‹å®Œæˆ ===');
        console.log('æ‰¾åˆ°çš„è¡Œæ¥·å­—ä½“:', foundXingkai);
        console.log('æ‰¾åˆ°çš„æ¥·ä½“å­—ä½“:', foundKaiti);
    </script>
</body>
</html>
