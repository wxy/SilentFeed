# Silent Feed å›½é™…åŒ–ï¼ˆi18nï¼‰ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

é¡¹ç›®ä½¿ç”¨ **react-i18next** å®ç°å›½é™…åŒ–æ”¯æŒï¼Œç›®å‰æ”¯æŒï¼š
- ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ï¼ˆzh-CNï¼‰- é»˜è®¤è¯­è¨€
- ğŸ‡ºğŸ‡¸ è‹±æ–‡ï¼ˆenï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åœ¨ React ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { useI18n } from "@/i18n/helpers"

function MyComponent() {
  const { _ } = useI18n()
  
  return (
    <div>
      <h1>{_("app.name")}</h1>
      <p>{_("popup.welcome")}</p>
      
      {/* å¸¦å‚æ•°çš„ç¿»è¯‘ */}
      <span>{_("popup.progress", { current: 100, total: 1000 })}</span>
    </div>
  )
}
```

### 2. åœ¨é React ä»£ç ä¸­ä½¿ç”¨

```typescript
import { _ } from "@/i18n/helpers"

// åœ¨å·¥å…·å‡½æ•°æˆ–ç±»ä¸­
function showError() {
  const message = _("common.error")
  alert(message)
}
```

### 3. å¼€å‘æ—¥å¿— vs ç”¨æˆ·æ¶ˆæ¯

```typescript
// âŒ é”™è¯¯ - ç”¨æˆ·å¯è§çš„æ¶ˆæ¯åº”è¯¥ä½¿ç”¨ _()
alert("æ“ä½œå¤±è´¥")

// âœ… æ­£ç¡® - ç”¨æˆ·å¯è§çš„æ¶ˆæ¯
alert(_("errors.operationFailed"))

// âœ… æ­£ç¡® - å¼€å‘æ—¥å¿—ä¿æŒä¸­æ–‡
console.log("å¼€å§‹åˆå§‹åŒ–æ•°æ®åº“...")
console.debug("ç”¨æˆ·ç”»åƒæ›´æ–°å®Œæˆ", profile)
```

---

## ğŸ“ å¼€å‘å·¥ä½œæµ

### æ­¥éª¤ 0: é…ç½® API Keyï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½éœ€è¦ DeepSeek API Keyï¼š

```bash
# æ–¹å¼ 1: è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä¸´æ—¶ï¼‰
export DEEPSEEK_API_KEY='your-api-key-here'

# æ–¹å¼ 2: åˆ›å»º .env æ–‡ä»¶ï¼ˆæ¨èï¼‰
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
```

è·å– API Keyï¼š
1. è®¿é—® https://platform.deepseek.com/
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åˆ›å»º API Key
4. å¤åˆ¶åˆ° `.env` æ–‡ä»¶

**âš ï¸ é‡è¦**: `.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­ï¼Œä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬åº“ã€‚

### æ­¥éª¤ 1: ç¼–å†™ä»£ç æ—¶ä½¿ç”¨ _()

```tsx
// ä¸è¦ç¡¬ç¼–ç æ–‡æœ¬
<button>è®¾ç½®</button>

// ä½¿ç”¨ _() åŒ…è£¹
<button>{_("popup.settings")}</button>
```

### æ­¥éª¤ 2: åœ¨ç¿»è¯‘æ–‡ä»¶ä¸­æ·»åŠ ä¸­æ–‡

ç¼–è¾‘ `public/locales/zh-CN/translation.json`:

```json
{
  "popup": {
    "settings": "è®¾ç½®"
  }
}
```

### æ­¥éª¤ 3: è¿è¡Œè‡ªåŠ¨ç¿»è¯‘

```bash
npm run i18n:translate
```

è„šæœ¬ä¼šï¼š
1. æ‰«æä¸­æ–‡ç¿»è¯‘æ–‡ä»¶
2. å¯¹æ¯”è‹±æ–‡ç¿»è¯‘æ–‡ä»¶
3. æ‰¾å‡ºç¼ºå¤±æˆ–è¿‡æ—¶çš„ç¿»è¯‘
4. ä½¿ç”¨ DeepSeek API è‡ªåŠ¨ç¿»è¯‘
5. æ›´æ–°è‹±æ–‡ç¿»è¯‘æ–‡ä»¶

### æ­¥éª¤ 4: å®¡æŸ¥ç¿»è¯‘ç»“æœ

æ£€æŸ¥ `public/locales/en/translation.json`ï¼Œç¡®ä¿ç¿»è¯‘è´¨é‡ã€‚
å¦‚æœ‰éœ€è¦ï¼Œæ‰‹åŠ¨è°ƒæ•´ç¿»è¯‘ã€‚

---

## ğŸ› ï¸ å¯ç”¨è„šæœ¬

```bash
# ä»ä»£ç ä¸­æå–ç¿»è¯‘ keyï¼ˆé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è¿è¡Œï¼‰
npm run i18n:extract

# è‡ªåŠ¨ç¿»è¯‘ï¼ˆæ¨èï¼‰
npm run i18n:translate

# ä¸€é”®åŒæ­¥ï¼ˆæå– + ç¿»è¯‘ï¼‰
npm run i18n:sync
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
public/
â””â”€â”€ locales/
    â”œâ”€â”€ zh-CN/
    â”‚   â””â”€â”€ translation.json          # ä¸­æ–‡ç¿»è¯‘ï¼ˆæºè¯­è¨€ï¼‰
    â”œâ”€â”€ en/
    â”‚   â””â”€â”€ translation.json          # è‹±æ–‡ç¿»è¯‘
    â””â”€â”€ .translation-tracker.json     # ç¿»è¯‘è·Ÿè¸ªè®°å½•

src/
â””â”€â”€ i18n/
    â”œâ”€â”€ index.ts                      # i18n é…ç½®
    â”œâ”€â”€ helpers.ts                    # _() å‡½æ•°
    â””â”€â”€ types.ts                      # TypeScript ç±»å‹

scripts/
â””â”€â”€ translate.js                      # è‡ªåŠ¨ç¿»è¯‘è„šæœ¬
```

---

## ğŸ“– ç¿»è¯‘æ–‡ä»¶æ ¼å¼

### åµŒå¥—ç»“æ„ï¼ˆæ¨èï¼‰

```json
{
  "app": {
    "name": "Silent Feed",
    "shortName": "RSS é™éŸ³å™¨"
  },
  "popup": {
    "welcome": "æ¬¢è¿ä½¿ç”¨æ™ºèƒ½ RSS é˜…è¯»å™¨",
    "stage": {
      "explorer": "æ¢ç´¢è€…é˜¶æ®µ",
      "learner": "å­¦ä¹ è€…é˜¶æ®µ"
    }
  }
}
```

### ä½¿ç”¨æ’å€¼

```json
{
  "popup": {
    "progress": "{{current}}/{{total}} é¡µ"
  }
}
```

```tsx
_("popup.progress", { current: 100, total: 1000 })
// è¾“å‡º: 100/1000 é¡µ
```

---

## ğŸŒ è¯­è¨€æ£€æµ‹

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹é¡ºåºè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€ï¼š

1. **localStorage** - ç”¨æˆ·ä¸Šæ¬¡é€‰æ‹©çš„è¯­è¨€
2. **æµè§ˆå™¨è¯­è¨€** - `navigator.language`
3. **é»˜è®¤è¯­è¨€** - ä¸­æ–‡ï¼ˆzh-CNï¼‰

### æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€

```tsx
import { LanguageSwitcher } from "@/components/LanguageSwitcher"

function Settings() {
  return (
    <div>
      <LanguageSwitcher />
    </div>
  )
}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. Key å‘½åè§„èŒƒ

```typescript
// âœ… å¥½çš„å‘½å
_("popup.welcome")
_("errors.networkError")
_("settings.privacy.title")

// âŒ ä¸å¥½çš„å‘½å
_("text1")
_("msg")
_("welcomeMessageForPopup")
```

**è§„åˆ™**ï¼š
- ä½¿ç”¨å±‚çº§ç»“æ„ï¼š`æ¨¡å—.åŠŸèƒ½.å…·ä½“å†…å®¹`
- ä½¿ç”¨é©¼å³°å‘½å
- è¯­ä¹‰æ¸…æ™°æ˜ç¡®

### 2. åŒºåˆ†ç”¨æˆ·æ¶ˆæ¯å’Œå¼€å‘æ—¥å¿—

```typescript
// ç”¨æˆ·å¯è§ - éœ€è¦å›½é™…åŒ–
throw new Error(_("errors.storageError"))
showNotification(_("notifications.syncSuccess"))
alert(_("common.confirm"))

// å¼€å‘æ—¥å¿— - ä¿æŒä¸­æ–‡
console.log("å¼€å§‹åˆå§‹åŒ–æ•°æ®åº“...")
console.debug("ç”¨æˆ·ç”»åƒæ›´æ–°å®Œæˆ", profile)
console.error("æ•°æ®åº“è¿æ¥å¤±è´¥", error)
```

### 3. é¿å…ç¡¬ç¼–ç 

```tsx
// âŒ é”™è¯¯
<button>è®¾ç½®</button>
<p>æ¬¢è¿ä½¿ç”¨</p>

// âœ… æ­£ç¡®
<button>{_("common.settings")}</button>
<p>{_("welcome.message")}</p>
```

### 4. å¤„ç†å¤æ•°å½¢å¼

```json
{
  "items": {
    "count_one": "{{count}} ä¸ªé¡¹ç›®",
    "count_other": "{{count}} ä¸ªé¡¹ç›®"
  }
}
```

```tsx
_("items.count", { count: itemCount })
```

---

## ğŸ”§ ç¿»è¯‘è·Ÿè¸ªç³»ç»Ÿ

`.translation-tracker.json` æ–‡ä»¶è®°å½•æ¯ä¸ªç¿»è¯‘çš„çŠ¶æ€ï¼š

```json
{
  "version": "1.0.0",
  "lastUpdate": "2025-11-02T18:30:00Z",
  "translations": {
    "popup.welcome": {
      "zh-CN": {
        "value": "æ¬¢è¿ä½¿ç”¨æ™ºèƒ½ RSS é˜…è¯»å™¨",
        "hash": "a1b2c3d4",
        "lastModified": "2025-11-02T18:30:00Z",
        "status": "verified"
      },
      "en": {
        "value": "Welcome to the Smart RSS Reader",
        "hash": "e5f6g7h8",
        "lastModified": "2025-11-02T18:30:00Z",
        "status": "ai-translated"
      }
    }
  }
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `value`: ç¿»è¯‘æ–‡æœ¬
- `hash`: å†…å®¹å“ˆå¸Œï¼ˆç”¨äºæ£€æµ‹å˜åŒ–ï¼‰
- `lastModified`: æœ€åä¿®æ”¹æ—¶é—´
- `status`: 
  - `verified`: å·²äººå·¥å®¡æ ¸
  - `ai-translated`: AI è‡ªåŠ¨ç¿»è¯‘

---

## ğŸ¤– AI ç¿»è¯‘é…ç½®

ç¿»è¯‘è„šæœ¬ä½¿ç”¨ DeepSeek APIï¼Œé…ç½®åœ¨ `scripts/translate.js`:

```javascript
const CONFIG = {
  apiKey: process.env.DEEPSEEK_API_KEY,
  apiUrl: "https://api.deepseek.com/v1/chat/completions",
  model: "deepseek-chat",
  // ...
}
```

### ç¿»è¯‘ç‰¹ç‚¹

- âœ… ä¿ç•™ `{{å˜é‡}}` æ’å€¼æ ¼å¼
- âœ… ä¿ç•™äº§å“åç§°ï¼ˆSilent Feedï¼‰
- âœ… ç®€æ´ã€è‡ªç„¶ã€ç¬¦åˆç›®æ ‡è¯­è¨€ä¹ æƒ¯
- âœ… ä½æ¸©åº¦è®¾ç½®ï¼ˆ0.3ï¼‰ç¡®ä¿ç¿»è¯‘ç¨³å®š

---

## ğŸ“Š ç¿»è¯‘ç»Ÿè®¡

å½“å‰çŠ¶æ€ï¼š
- **æ”¯æŒè¯­è¨€**: 2 ä¸ªï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰
- **ç¿»è¯‘ key æ•°**: 17 ä¸ª
- **è¦†ç›–ç‡**: 100%

æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡ï¼š
```bash
npm run i18n:translate
```

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°è¯­è¨€ï¼Ÿ

1. åœ¨ `public/locales/` åˆ›å»ºæ–°è¯­è¨€ç›®å½•ï¼ˆå¦‚ `ja/`ï¼‰
2. å¤åˆ¶ `zh-CN/translation.json` åˆ°æ–°ç›®å½•
3. æ›´æ–° `scripts/translate.js` çš„ `targetLocales`
4. è¿è¡Œ `npm run i18n:translate`

### Q: AI ç¿»è¯‘è´¨é‡å¦‚ä½•ï¼Ÿ

- ä¸€èˆ¬æ–‡æœ¬ï¼šå‡†ç¡®åº¦ > 90%
- æŠ€æœ¯æœ¯è¯­ï¼šå»ºè®®äººå·¥å®¡æ ¸
- äº§å“åç§°ï¼šè‡ªåŠ¨ä¿ç•™ä¸ç¿»è¯‘

### Q: å¦‚ä½•å›é€€é”™è¯¯çš„ç¿»è¯‘ï¼Ÿ

æŸ¥çœ‹ `.translation-tracker.json` å†å²è®°å½•ï¼Œ
æˆ–é€šè¿‡ Git å†å²æ¢å¤ç¿»è¯‘æ–‡ä»¶ã€‚

### Q: dev æ¨¡å¼ä¼šè‡ªåŠ¨ç¿»è¯‘å—ï¼Ÿ

ä¸ä¼šã€‚`npm run dev` åªå¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚
ç¿»è¯‘éœ€è¦æ‰‹åŠ¨è¿è¡Œ `npm run i18n:translate`ã€‚

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [react-i18next æ–‡æ¡£](https://react.i18next.com/)
- [i18next æ–‡æ¡£](https://www.i18next.com/)
- [DeepSeek API æ–‡æ¡£](https://platform.deepseek.com/docs)

---

**æœ€åæ›´æ–°**: 2025-11-02  
**ç»´æŠ¤è€…**: SilentFeed Team
