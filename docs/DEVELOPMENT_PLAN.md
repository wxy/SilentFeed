# FeedAIMuter 渐进式开发计划

## 开发理念

**每一步都可见、可测、可用**

- ✅ 每个功能都有明确的验收标准
- ✅ 每个功能都可以在浏览器中直接体验
- ✅ 每个功能都有配套的测试
- ✅ 每个功能完成后更新文档

---

## 阶段 0: 基础框架 ✅ (已完成)

### 目标
建立项目基础和测试体系

### 已完成
- ✅ 项目初始化 (Plasmo + React + TypeScript)
- ✅ 测试体系 (Vitest + Testing Library)
- ✅ 开发规范 (copilot-instructions)
- ✅ 文档体系 (PRD, TDD, TESTING)
- ✅ 扩展可以构建和加载

### 验收标准
- ✅ `npm run build` 成功
- ✅ `npm test` 全部通过
- ✅ 可在 Chrome 中加载扩展

---

## 阶段 1: Hello World 扩展 🎯 (当前)

### 目标
让用户能看到一个有基本 UI 的扩展

### 功能列表

#### 1.1 创建 Popup 界面 (约 30 分钟)
**文件**: `src/popup.tsx`

**功能**:
- 显示扩展名称和图标
- 显示欢迎消息
- 显示当前状态 (未初始化)
- 显示初始化进度 0/1000

**验收标准**:
- [ ] 点击扩展图标后弹出界面
- [ ] 界面显示 "FeedAIMuter" 标题
- [ ] 显示 🌱 图标和 "0/1000 页" 文字
- [ ] 界面自适应明暗主题
- [ ] 有测试覆盖

**用户体验**:
```
┌─────────────────────────────┐
│  🌱 FeedAIMuter              │
├─────────────────────────────┤
│  欢迎使用智能 RSS 阅读器      │
│                              │
│  ╔═══════════════════════╗   │
│  ║ ░░░░░░░░░░░░░░░░░░░░░ ║ 0/1000 │
│  ╚═══════════════════════╝   │
│                              │
│  📖 开始浏览，我会学习你的    │
│     兴趣...                   │
│                              │
│  [设置]                       │
└─────────────────────────────┘
```

#### 1.2 创建设置页面 (约 20 分钟)
**文件**: `src/options.tsx`

**功能**:
- 显示项目介绍
- 显示隐私说明
- AI 配置入口 (暂时禁用)

**验收标准**:
- [ ] Popup 点击 [设置] 跳转到 options 页面
- [ ] 显示产品理念和隐私承诺
- [ ] 显示 "AI 配置将在 1000 页后启用" 提示
- [ ] 有测试覆盖

#### 1.3 添加扩展图标 (约 10 分钟)
**文件**: `assets/icon.png`

**功能**:
- 创建 16x16, 48x48, 128x128 尺寸图标
- 使用 🌱 emoji 或简单设计

**验收标准**:
- [ ] 浏览器工具栏显示扩展图标
- [ ] 扩展管理页显示图标
- [ ] 图标清晰可辨识

### 本阶段文档
- [ ] `docs/PHASE_1_POPUP.md` - Popup 开发文档
- [ ] 更新 `README.md` - 添加使用说明

### 完成标准
- [ ] 所有验收标准通过
- [ ] 测试覆盖率 ≥ 70%
- [ ] 代码已提交到 Git
- [ ] 文档已更新

---

## 阶段 2: 页面访问监听 (预计 2 小时)

### 目标
开始收集用户浏览数据，显示实时进度

### 功能列表

#### 2.1 Content Script 注入
**文件**: `src/contents/page-tracker.ts`

**功能**:
- 监听页面加载
- 提取页面基本信息 (URL, 标题)
- 计算停留时间
- 过滤无效页面

**验收标准**:
- [ ] 访问任何网页时自动触发
- [ ] 停留 >30 秒的页面被记录
- [ ] 黑名单域名被过滤 (localhost, 192.168.*)
- [ ] 有完整测试

#### 2.2 数据存储
**文件**: `src/storage/db.ts`, `src/storage/types.ts`

**功能**:
- 使用 Dexie.js 创建 IndexedDB 数据库
- 定义 PageVisit 数据模型
- 实现增删改查

**验收标准**:
- [ ] 页面访问数据正确保存
- [ ] 可以查询历史访问记录
- [ ] 数据自动清理 (90 天)
- [ ] 有完整测试

#### 2.3 实时进度更新
**更新**: `src/popup.tsx`

**功能**:
- 从数据库读取访问计数
- 实时更新进度条
- 显示当前阶段 (🌱/🌿/🌳/🌲)

**验收标准**:
- [ ] 每访问一个有效页面，计数 +1
- [ ] 进度条实时更新
- [ ] 达到 250/600/1000 时图标自动切换
- [ ] 有完整测试

### 本阶段文档
- [ ] `docs/PHASE_2_PAGE_TRACKING.md`
- [ ] 更新 `README.md` 使用说明

### 完成标准
- [ ] 所有验收标准通过
- [ ] 测试覆盖率 ≥ 70%
- [ ] 代码已提交
- [ ] 文档已更新

---

## 阶段 3: 用户画像构建 (预计 3 小时)

### 目标
分析用户浏览行为，构建兴趣画像

### 功能列表

#### 3.1 文本分析引擎
**文件**: `src/core/analyzer/TextAnalyzer.ts`

**功能**:
- TF-IDF 关键词提取
- 中英文分词
- 停用词过滤

#### 3.2 用户画像构建器
**文件**: `src/core/profile/ProfileBuilder.ts`

**功能**:
- 从页面访问构建画像
- 主题分类
- 时间衰减

#### 3.3 画像可视化
**更新**: `src/popup.tsx`

**功能**:
- 显示 Top 3 兴趣主题
- 显示主题占比
- 显示分析进度

### 本阶段文档
- [ ] `docs/PHASE_3_PROFILING.md`

---

## 阶段 4: RSS 自动发现 (预计 2 小时)

### 目标
自动检测网页的 RSS 源并提示订阅

### 功能列表

#### 4.1 RSS 检测
**文件**: `src/contents/rss-detector.ts`

**功能**:
- 检测 `<link rel="alternate">` 标签
- 尝试常见 RSS URL 模式
- 验证 RSS 有效性

#### 4.2 订阅管理
**文件**: `src/core/rss/RSSManager.ts`

**功能**:
- OPML 导入/导出
- 源健康检测
- 自动订阅/取消

#### 4.3 订阅 UI
**更新**: `src/popup.tsx`

**功能**:
- 显示已订阅源列表
- 显示"发现新源"提示
- 一键订阅/取消订阅

### 本阶段文档
- [ ] `docs/PHASE_4_RSS_DISCOVERY.md`

---

## 阶段 5: AI 推荐引擎 (预计 4 小时)

### 目标
实现基础推荐算法和 AI 集成

### 功能列表

#### 5.1 规则引擎推荐
**文件**: `src/core/recommender/RuleBasedRecommender.ts`

**功能**:
- TF-IDF 相似度匹配
- 时效性评分
- 预筛选算法

#### 5.2 AI 适配器
**文件**: `src/core/ai/AIAdapter.ts`

**功能**:
- 支持 OpenAI API
- 支持 Anthropic API
- 支持 DeepSeek API
- Prompt 工程

#### 5.3 推荐展示
**更新**: `src/popup.tsx`

**功能**:
- 显示推荐列表
- 显示推荐理由
- 反馈按钮 (喜欢/忽略/稍后)

### 本阶段文档
- [ ] `docs/PHASE_5_RECOMMENDATION.md`

---

## 阶段 6: 通知机制 (预计 2 小时)

### 目标
智能推送重要内容

### 功能列表

#### 6.1 通知策略
**文件**: `src/core/notification/NotificationManager.ts`

**功能**:
- 重要性评分
- 用户状态检测
- 每日配额管理

#### 6.2 扩展图标状态
**文件**: `src/background/badge-manager.ts`

**功能**:
- 显示未读数字徽章
- 图标动画 (可选)

### 本阶段文档
- [ ] `docs/PHASE_6_NOTIFICATION.md`

---

## 阶段 7: 优化与发布 (预计 3 小时)

### 目标
完善体验，准备发布

### 功能列表

#### 7.1 性能优化
- 批量处理
- 缓存策略
- 懒加载

#### 7.2 用户引导
- 首次使用教程
- 帮助文档
- 反馈渠道

#### 7.3 Chrome Web Store 准备
- 截图和宣传图
- 商店描述
- 隐私政策

### 本阶段文档
- [ ] `docs/PHASE_7_POLISH.md`
- [ ] `docs/PUBLISHING.md`

---

## 开发节奏建议

### 每个阶段的流程

1. **开始前** (5 分钟)
   - 阅读阶段文档
   - 创建功能分支: `git checkout -b feature/phase-N`

2. **开发中** (主要时间)
   - 编写测试 (TDD)
   - 实现功能
   - 频繁提交: `git commit -m "feat: xxx"`

3. **完成后** (10 分钟)
   - 运行测试: `npm test`
   - 检查覆盖率: `npm run test:coverage`
   - 更新文档
   - 合并到 master: `git merge feature/phase-N`
   - 推送: `git push`

### 每日开发建议

- **每次 1-2 小时**: 完成一个小功能
- **立即验证**: 在浏览器中测试
- **及时提交**: 不积累太多未提交代码

---

## 当前状态

- ✅ **阶段 0**: 基础框架 (已完成)
- 🎯 **阶段 1**: Hello World 扩展 (即将开始)
- ⏸️ **阶段 2-7**: 等待开始

---

## 估计时间

| 阶段 | 预计时间 | 累计时间 |
|------|---------|---------|
| 阶段 0 | 2 小时 | 2 小时 ✅ |
| 阶段 1 | 1 小时 | 3 小时 |
| 阶段 2 | 2 小时 | 5 小时 |
| 阶段 3 | 3 小时 | 8 小时 |
| 阶段 4 | 2 小时 | 10 小时 |
| 阶段 5 | 4 小时 | 14 小时 |
| 阶段 6 | 2 小时 | 16 小时 |
| 阶段 7 | 3 小时 | 19 小时 |

**MVP 总计**: 约 19 小时 (2-3 周业余时间)

---

## 下一步

准备好开始 **阶段 1: Hello World 扩展** 了吗？

这个阶段将创建：
- ✅ 可见的 Popup 界面
- ✅ 基础的设置页面
- ✅ 扩展图标

完成后你就能在浏览器中看到一个真实可用的扩展了！🎉
