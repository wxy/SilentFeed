# ç‰ˆæœ¬ç®¡ç†æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ¨èå·¥ä½œæµï¼ˆæ™ºèƒ½ PR åˆ›å»ºï¼‰

```bash
# 1. å¼€å‘å®Œæˆåï¼Œæäº¤æ‰€æœ‰æ›´æ”¹
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 2. ä½¿ç”¨æ™ºèƒ½ PR åˆ›å»ºè„šæœ¬ï¼ˆè‡ªåŠ¨å¤„ç†ç‰ˆæœ¬å·ï¼‰
npm run pr
```

æ™ºèƒ½ PR è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- ğŸ“Š åˆ†æä½ çš„æäº¤å†…å®¹
- ğŸ¯ å»ºè®®åˆé€‚çš„ç‰ˆæœ¬ç±»å‹ï¼ˆmajor/minor/patchï¼‰
- âœï¸ è¯¢é—®æ˜¯å¦æ›´æ–°ç‰ˆæœ¬å·
- ğŸ“¤ æ¨é€åˆ†æ”¯å¹¶åˆ›å»º PR
- ğŸ·ï¸ è‡ªåŠ¨æ·»åŠ åˆé€‚çš„æ ‡ç­¾

### ä¼ ç»Ÿå·¥ä½œæµï¼ˆæ‰‹åŠ¨ç®¡ç†ï¼‰

```bash
# 1. æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬
npm run version:patch  # æˆ– minor/major

# 2. æ¨é€ä»£ç 
git push origin your-branch

# 3. åˆ›å»º PR
gh pr create --title "feat: xxx"
```

---

## è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ£€æŸ¥

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ£€æŸ¥ PR çš„ç‰ˆæœ¬å·æ›´æ–°ã€‚

### å·¥ä½œæµç¨‹

1. **åˆ›å»º PR** â†’ GitHub Actions è‡ªåŠ¨è¿è¡Œç‰ˆæœ¬æ£€æŸ¥
2. **è‡ªåŠ¨åˆ¤æ–­**ï¼š
   - æ ¹æ® PR æ ‡ç­¾ï¼ˆ`breaking`ã€`feature`ã€`fix`ï¼‰
   - æ ¹æ® PR æ ‡é¢˜ï¼ˆç¬¦åˆ Conventional Commits è§„èŒƒï¼‰
   - å»ºè®®åº”è¯¥ä½¿ç”¨çš„ç‰ˆæœ¬ç±»å‹
3. **æç¤ºè¯„è®º**ï¼šå¦‚æœç‰ˆæœ¬å·æœªæ›´æ–°ï¼Œä¼šåœ¨ PR ä¸­æ·»åŠ è¯„è®ºæé†’
4. **ä¸é˜»æ­¢åˆå¹¶**ï¼šç‰ˆæœ¬æ£€æŸ¥æ˜¯æé†’æ€§è´¨ï¼Œä¸ä¼šé˜»æ­¢ PR åˆå¹¶

### ç‰ˆæœ¬å·è§„åˆ™

éµå¾ª [Semantic Versioning 2.0.0](https://semver.org/lang/zh-CN/)ï¼š

| ç‰ˆæœ¬ç±»å‹ | æ ¼å¼ | ä½•æ—¶ä½¿ç”¨ | ç¤ºä¾‹ |
|---------|------|---------|------|
| **Patch** | `0.4.x` | Bug ä¿®å¤ã€æ–‡æ¡£æ›´æ–°ã€å°ä¼˜åŒ– | 0.4.0 â†’ 0.4.1 |
| **Minor** | `0.x.0` | æ–°åŠŸèƒ½ã€å‘åå…¼å®¹çš„æ”¹è¿› | 0.4.0 â†’ 0.5.0 |
| **Major** | `x.0.0` | ç ´åæ€§å˜æ›´ã€é‡å¤§æ¶æ„è°ƒæ•´ | 0.4.0 â†’ 1.0.0 |

### å¦‚ä½•æ›´æ–°ç‰ˆæœ¬ï¼Ÿ

#### æ–¹æ³• 1: æ™ºèƒ½ PR åˆ›å»ºè„šæœ¬ï¼ˆå¼ºçƒˆæ¨è â­ï¼‰

```bash
npm run pr
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
1. ğŸ“Š æ˜¾ç¤ºæ‰€æœ‰å˜æ›´æäº¤
2. ğŸ¤– åˆ†ææäº¤å†…å®¹ï¼Œæ™ºèƒ½å»ºè®®ç‰ˆæœ¬ç±»å‹
3. âœï¸ äº¤äº’å¼è¯¢é—®æ˜¯å¦æ›´æ–°ç‰ˆæœ¬
4. ğŸ“¤ è‡ªåŠ¨æ¨é€åˆ†æ”¯
5. ğŸš€ åˆ›å»º PR å¹¶æ·»åŠ æ ‡ç­¾

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸ¤« Silent Feed - æ™ºèƒ½ PR åˆ›å»ºå™¨     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ å½“å‰åˆ†æ”¯: feature/ai-summary

ğŸ“Š å˜æ›´ç»Ÿè®¡:
  a1b2c3d feat: æ·»åŠ  AI æ‘˜è¦åŠŸèƒ½
  d4e5f6g docs: æ›´æ–°æ–‡æ¡£

æäº¤æ•°é‡: 2

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ ç‰ˆæœ¬ä¿¡æ¯:
  Master ç‰ˆæœ¬: 0.4.0
  å½“å‰ç‰ˆæœ¬:   0.4.0
  âš ï¸  ç‰ˆæœ¬æœªæ›´æ–°

ğŸ¯ å»ºè®®ç‰ˆæœ¬:
  ç±»å‹: âœ¨ Minor (åŒ…å«æ–°åŠŸèƒ½)
  ç‰ˆæœ¬: 0.5.0

æ˜¯å¦æ›´æ–°ç‰ˆæœ¬å·ï¼Ÿ
  y - ä½¿ç”¨å»ºè®®ç‰ˆæœ¬ (0.5.0)
  c - è‡ªå®šä¹‰ç‰ˆæœ¬å·
  n - è·³è¿‡ï¼ˆç¨åæ›´æ–°ï¼‰
```

#### æ–¹æ³• 2: Git Push æ—¶è‡ªåŠ¨æ£€æŸ¥

é…ç½® Git pre-push hookï¼ˆå¯é€‰ï¼‰ï¼š

```bash
# æ·»åŠ åˆ° .git/hooks/pre-push
#!/bin/bash
npm run version:check
```

æ¯æ¬¡ `git push` æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥ç‰ˆæœ¬å·ï¼Œå¦‚æœæœªæ›´æ–°ä¼šæç¤ºã€‚

#### æ–¹æ³• 3: ä½¿ç”¨ npm versionï¼ˆæ¨èï¼‰

```bash
# Bug ä¿®å¤
npm run version:patch

# æ–°åŠŸèƒ½
npm run version:minor

# ç ´åæ€§å˜æ›´
npm run version:major
```

è¿™ä¼šè‡ªåŠ¨ï¼š
- æ›´æ–° `package.json` ä¸­çš„ç‰ˆæœ¬å·
- åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬æ›´æ–°çš„ commit
- åˆ›å»ºä¸€ä¸ª Git tag

#### æ–¹æ³• 4: æ‰‹åŠ¨ç¼–è¾‘

ç›´æ¥ç¼–è¾‘ `package.json` ä¸­çš„ `version` å­—æ®µï¼š

```json
{
  "version": "0.4.1"
}
```

### PR æ ‡ç­¾å»ºè®®

ä¸ºäº†è®©è‡ªåŠ¨æ£€æŸ¥æ›´å‡†ç¡®ï¼Œå»ºè®®ä¸º PR æ·»åŠ åˆé€‚çš„æ ‡ç­¾ï¼š

- `fix` / `bugfix` â†’ å»ºè®® patch
- `feature` / `enhancement` â†’ å»ºè®® minor
- `breaking` / `major` â†’ å»ºè®® major

### Conventional Commits

PR æ ‡é¢˜éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/)ï¼š

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**ç±»å‹ç¤ºä¾‹**ï¼š
- `fix: ä¿®å¤é˜…è¯»æ¸…å•åˆ é™¤é—®é¢˜` â†’ patch
- `feat: æ·»åŠ  AI æ‘˜è¦åŠŸèƒ½` â†’ minor
- `feat!: é‡æ„æ¨èç³»ç»Ÿæ¶æ„` â†’ major
- `feat(api)!: å˜æ›´ API æ¥å£` â†’ major

### ç‰ˆæœ¬å‘å¸ƒæµç¨‹

1. **å¼€å‘é˜¶æ®µ**ï¼šåœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šå¼€å‘
2. **åˆ›å»º PR**ï¼šæäº¤åˆ° master
3. **ç‰ˆæœ¬æ£€æŸ¥**ï¼šGitHub Actions è‡ªåŠ¨æ£€æŸ¥å¹¶æç¤º
4. **æ›´æ–°ç‰ˆæœ¬**ï¼šæ ¹æ®æç¤ºæ›´æ–°ç‰ˆæœ¬å·
5. **åˆå¹¶ PR**ï¼šåˆå¹¶åè‡ªåŠ¨æ„å»º
6. **æ‰“åŒ…å‘å¸ƒ**ï¼š
   ```bash
   npm run build
   npm run package
   ```
7. **åˆ›å»º Release**ï¼šåœ¨ GitHub ä¸Šåˆ›å»º Release å¹¶ä¸Šä¼  zip åŒ…

### ç¤ºä¾‹åœºæ™¯

#### åœºæ™¯ 1: ä¿®å¤ä¸€ä¸ª Bug

```bash
# 1. åˆ›å»ºåˆ†æ”¯
git checkout -b fix/reading-list-bug

# 2. ä¿®å¤ä»£ç å¹¶æäº¤
git commit -m "fix: ä¿®å¤é˜…è¯»æ¸…å•åˆ é™¤é€»è¾‘"

# 3. æ›´æ–°ç‰ˆæœ¬
npm run version:patch  # 0.4.0 â†’ 0.4.1

# 4. æ¨é€
git push origin fix/reading-list-bug

# 5. åˆ›å»º PR
gh pr create --title "fix: ä¿®å¤é˜…è¯»æ¸…å•åˆ é™¤é€»è¾‘"
```

#### åœºæ™¯ 2: æ·»åŠ æ–°åŠŸèƒ½

```bash
# 1. åˆ›å»ºåˆ†æ”¯
git checkout -b feature/ai-summary

# 2. å¼€å‘åŠŸèƒ½å¹¶æäº¤
git commit -m "feat: æ·»åŠ  AI æ–‡ç« æ‘˜è¦åŠŸèƒ½"

# 3. æ›´æ–°ç‰ˆæœ¬
npm run version:minor  # 0.4.0 â†’ 0.5.0

# 4. æ¨é€å’Œåˆ›å»º PR
git push origin feature/ai-summary
gh pr create --title "feat: æ·»åŠ  AI æ–‡ç« æ‘˜è¦åŠŸèƒ½" --label "feature"
```

#### åœºæ™¯ 3: ç ´åæ€§å˜æ›´

```bash
# 1. åˆ›å»ºåˆ†æ”¯
git checkout -b refactor/api-v2

# 2. é‡æ„ä»£ç 
git commit -m "feat!: é‡æ„æ¨èç³»ç»Ÿ API"

# 3. æ›´æ–°ç‰ˆæœ¬
npm run version:major  # 0.4.0 â†’ 1.0.0

# 4. æ¨é€å’Œåˆ›å»º PR
git push origin refactor/api-v2
gh pr create --title "feat!: é‡æ„æ¨èç³»ç»Ÿ API" --label "breaking"
```

## æ³¨æ„äº‹é¡¹

1. **ä¸è¦è·³è¿‡ç‰ˆæœ¬å·**ï¼šæŒ‰ç…§ semver è§„èŒƒé€’å¢
2. **PR åˆå¹¶å‰æ›´æ–°**ï¼šç¡®ä¿ PR åˆå¹¶å‰ç‰ˆæœ¬å·å·²æ›´æ–°
3. **åªåœ¨ master æ‰“ tag**ï¼šç‰ˆæœ¬ tag åªåœ¨ master åˆ†æ”¯åˆ›å»º
4. **CHANGELOG æ›´æ–°**ï¼šé‡è¦ç‰ˆæœ¬æ›´æ–°æ—¶æ›´æ–° `CHANGELOG.md`

## å¸¸è§é—®é¢˜

**Q: å¿˜è®°æ›´æ–°ç‰ˆæœ¬å·æ€ä¹ˆåŠï¼Ÿ**  
A: GitHub Actions ä¼šåœ¨ PR ä¸­è‡ªåŠ¨æé†’ï¼ŒæŒ‰æç¤ºæ›´æ–°å³å¯ã€‚

**Q: å¦‚ä½•æ’¤é”€ç‰ˆæœ¬æ›´æ–°ï¼Ÿ**  
A: ä½¿ç”¨ `git reset --hard HEAD~1` æ’¤é”€ç‰ˆæœ¬ commitï¼Œé‡æ–°æ›´æ–°ã€‚

**Q: å¤šä¸ª PR åŒæ—¶å¼€å‘æ€ä¹ˆå¤„ç†ç‰ˆæœ¬å†²çªï¼Ÿ**  
A: ç¬¬ä¸€ä¸ªåˆå¹¶çš„ PR æ›´æ–°ç‰ˆæœ¬ï¼Œåç»­ PR rebase master åå†æ›´æ–°ç‰ˆæœ¬ã€‚

**Q: å¼€å‘ç‰ˆæœ¬å¦‚ä½•æ ‡è®°ï¼Ÿ**  
A: å¯ä»¥ä½¿ç”¨é¢„å‘å¸ƒç‰ˆæœ¬å¦‚ `0.5.0-beta.1`ï¼ˆæ‰‹åŠ¨ç¼–è¾‘ package.jsonï¼‰ã€‚
