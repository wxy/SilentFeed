# Phase 2.7 å®æ—¶åé¦ˆç•Œé¢ - è®¾è®¡æ‘˜è¦

> **å®Œæ•´è®¾è®¡æ–‡æ¡£**: ç”±äºå†…å®¹è¾ƒå¤šï¼Œå®Œæ•´è®¾è®¡åˆ†ä¸º 3 ä¸ªéƒ¨åˆ†
> - [Part 1: æ¦‚è¿°å’Œæ•°æ®æ¨¡å‹](./PHASE_2.7_UI_DESIGN.md)
> - [Part 2: å¾½ç« å’Œè®¾ç½®é¡µ](./PHASE_2.7_UI_DESIGN_PART2.md)
> - [Part 3: å®ç°å’Œæµ‹è¯•](./PHASE_2.7_UI_DESIGN_PART3.md)

---

## ğŸ¯ æ ¸å¿ƒç†å¿µ

**"æˆ‘ä»¬çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºç”¨æˆ·æŒ‘é€‰æœ€æœ‰ä»·å€¼çš„å†…å®¹è¿›è¡Œæ¨èï¼Œè€Œä¸æ˜¯æˆ‘ä»¬åˆ†æäº†å¤šå°‘é¡µé¢"**

- **å†·å¯åŠ¨ (0-1000)**: æ˜¾ç¤ºè¿›åº¦ï¼Œé¼“åŠ±æµè§ˆ
- **æ¨èé˜¶æ®µ (1000+)**: èšç„¦æ¨èå†…å®¹ï¼Œæ·¡åŒ–æ•°æ®æ”¶é›†

---

## ğŸ”‘ ä¸‰å¤§å…³é”®è®¾è®¡å†³ç­–

### 1. çœŸå®åé¦ˆæœºåˆ¶ âœ…

**é—®é¢˜**: "æ ‡è®°å·²è¯»"æ˜¯è™šå‡è¡Œä¸ºï¼Œç”¨æˆ·å®é™…æ²¡è¯»

**è§£å†³**:
```typescript
// âŒ æ—§è®¾è®¡
<button>æ ‡è®°å…¨éƒ¨å·²è¯»</button>  // è‡ªæ¬ºæ¬ºäºº

// âœ… æ–°è®¾è®¡
<button>è¿™äº›æˆ‘éƒ½ä¸æƒ³è¯»</button>  // æ˜ç¡®è¡¨è¾¾æ¨èæ— æ•ˆ

// æœ‰æ•ˆæ€§åˆ¤æ–­
interface Effectiveness {
  effective: 'ç‚¹å‡» + æ·±åº¦é˜…è¯»ï¼ˆåœç•™ > 2min + æ»šåŠ¨ > 70%ï¼‰'
  neutral: 'ç‚¹å‡» + æµ…é˜…è¯»'
  ineffective: 'ä¸»åŠ¨å¿½ç•¥'
}
```

### 2. ä¸»åŠ¨é€šçŸ¥ç³»ç»Ÿ ğŸ””

**é™åˆ¶**: Chrome Extension ä¸èƒ½ä¸»åŠ¨å¼¹å‡º Popup

**è§£å†³**: ä¸¤çº§é€šçŸ¥ç­–ç•¥
```typescript
// Level 1: å¾½ç« æé†’ï¼ˆå§‹ç»ˆå¯ç”¨ï¼‰
chrome.action.setBadgeText({ text: '1' })
chrome.action.setBadgeBackgroundColor({ color: '#FF6B35' }) // æ©™è‰²

// Level 2: ç³»ç»Ÿé€šçŸ¥ï¼ˆå¯é€‰ï¼Œéœ€è¦ç”¨æˆ·æˆæƒï¼‰
chrome.notifications.create({
  title: 'å‘ç°æ–°æ¨è',
  message: 'ã€ŠAI å¦‚ä½•æ”¹å˜è½¯ä»¶å¼€å‘ã€‹',
  buttons: [{ title: 'ç«‹å³æŸ¥çœ‹' }, { title: 'ç¨å' }]
})

// å…‹åˆ¶ç­–ç•¥ï¼šæ¯æ—¥æœ€å¤š 3 æ¬¡é€šçŸ¥
```

### 3. é˜²æ­¢å›éŸ³å®¤æ•ˆåº” ğŸ”„

**é—®é¢˜**: æ¨èå†…å®¹è¢«å­¦ä¹  â†’ å…´è¶£è¶Šæ¥è¶Šçª„

**è§£å†³**: é€‰æ‹©æ€§å­¦ä¹ ç­–ç•¥
```typescript
// é¡µé¢æ¥æº
enum PageSource {
  ORGANIC = 'organic',        // ç”¨æˆ·ä¸»åŠ¨è®¿é—®
  RECOMMENDED = 'recommended', // æ¥è‡ªæ¨è
  SEARCH = 'search'           // æœç´¢ç»“æœ
}

// å­¦ä¹ æƒé‡
function getLearningWeight(page: PageVisit): number {
  switch (page.source) {
    case ORGANIC:
      return 1.0  // å®Œå…¨å­¦ä¹ 
    
    case RECOMMENDED:
      // åªæœ‰æ·±åº¦é˜…è¯»æ‰å­¦ä¹ 
      if (page.dwellTime > 120 && page.scrollDepth > 0.7) {
        return 0.3  // è½»å¾®å­¦ä¹ 
      }
      return 0  // ä¸å­¦ä¹ 
    
    case SEARCH:
      return 0.5  // ä¸­ç­‰å­¦ä¹ 
  }
}

// æ¢ç´¢å› å­
const recommendationMix = {
  exploitation: 0.7,  // 70% åŸºäºå·²çŸ¥å…´è¶£
  exploration: 0.3    // 30% æ¢ç´¢æ–°é¢†åŸŸ
}
```

---

## ğŸ“± ç•Œé¢è®¾è®¡

### Popup ç•Œé¢

**å†·å¯åŠ¨é˜¶æ®µ (0-1000 é¡µ)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ± FeedAIMuter              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ­£åœ¨å­¦ä¹ ä½ çš„å…´è¶£...          â”‚
â”‚                              â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚
â”‚  â•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â•‘ 637/1000
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                              â”‚
â”‚  ç»§ç»­æ­£å¸¸æµè§ˆï¼Œæˆ‘ä¼šè‡ªåŠ¨å­¦ä¹    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¨èé˜¶æ®µ (1000+ é¡µ)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸ºä½ æ¨è                    â”‚
â”‚  [è¿™äº›æˆ‘éƒ½ä¸æƒ³è¯»]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Œ AI å¦‚ä½•æ”¹å˜è½¯ä»¶å¼€å‘      â”‚
â”‚     æ¥è‡ª TechCrunch          â”‚
â”‚     5 åˆ†é’Ÿå‰                 [âœ•]
â”‚                              â”‚
â”‚  ğŸ“Œ æ·±åº¦å­¦ä¹ çš„æœ€æ–°è¿›å±•        â”‚
â”‚     æ¥è‡ª Nature              â”‚
â”‚     1 å°æ—¶å‰                 [âœ•]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¾½ç« ç³»ç»Ÿ

**å†·å¯åŠ¨**: æˆé•¿æ ‘ emoji
- ğŸŒ± 0-250 é¡µï¼ˆæ¢ç´¢è€…ï¼‰
- ğŸŒ¿ 251-600 é¡µï¼ˆå­¦ä¹ è€…ï¼‰
- ğŸŒ³ 601-1000 é¡µï¼ˆæˆé•¿è€…ï¼‰

**æ¨èé˜¶æ®µ**: æ•°å­—å¾½ç« 
- `1` æ©™è‰² (#FF6B35) - æœ‰æ–°æ¨è
- `0` ç»¿è‰² (#4CAF50) - æ— æœªè¯»

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### æ ¸å¿ƒæ•°æ®æ¨¡å‹

```typescript
// æ¨è
interface Recommendation {
  id: string
  url: string
  title: string
  source: string
  recommendedAt: number
  score: number
  
  // æ–°å¢å­—æ®µ
  isClicked: boolean          // æ˜¯å¦ç‚¹å‡»
  clickedAt?: number          // ç‚¹å‡»æ—¶é—´
  isDismissed: boolean        // æ˜¯å¦å¿½ç•¥
  dismissedAt?: number        // å¿½ç•¥æ—¶é—´
  effectiveness?: 'effective' | 'neutral' | 'ineffective'
}

// é¡µé¢è®¿é—®ï¼ˆæ‰©å±•ï¼‰
interface PageVisit {
  // ... ç°æœ‰å­—æ®µ
  source: PageSource          // æ–°å¢ï¼šé¡µé¢æ¥æº
  scrollDepth: number         // æ–°å¢ï¼šæ»šåŠ¨æ·±åº¦
}
```

### å…³é”®å‡½æ•°

```typescript
// è¿½è¸ªæ¨èç‚¹å‡»
async function trackRecommendationClick(rec: Recommendation) {
  await db.recommendations.update(rec.id, {
    isClicked: true,
    clickedAt: Date.now()
  })
  
  // æ ‡è®°æ¥æº
  sessionStorage.setItem('recommendationSource', rec.id)
  
  // æ‰“å¼€é“¾æ¥
  chrome.tabs.create({ url: rec.url })
}

// åˆ¤æ–­æ¨èæœ‰æ•ˆæ€§
async function evaluateEffectiveness(recId: string): Promise<string> {
  const rec = await db.recommendations.get(recId)
  const visit = await findRelatedVisit(rec)
  
  if (!visit) return 'neutral'
  
  if (visit.dwellTime > 120 && visit.scrollDepth > 0.7) {
    return 'effective'
  }
  
  return 'ineffective'
}

// æ‰¹é‡å¿½ç•¥
async function dismissAllRecommendations() {
  await db.recommendations.toCollection().modify({
    isDismissed: true,
    dismissedAt: Date.now()
  })
  
  // å‘é€è´Ÿåé¦ˆä¿¡å·
  chrome.runtime.sendMessage({ type: 'BATCH_DISMISSED' })
}
```

---

## âœ… éªŒæ”¶æ¸…å•ï¼ˆæ ¸å¿ƒï¼‰

### åŠŸèƒ½éªŒæ”¶
- [ ] å†·å¯åŠ¨æ˜¾ç¤ºè¿›åº¦å’Œæˆé•¿æ ‘
- [ ] æ¨èé˜¶æ®µæ˜¾ç¤ºæ¨èåˆ—è¡¨
- [ ] "è¿™äº›æˆ‘éƒ½ä¸æƒ³è¯»"æŒ‰é’®å·¥ä½œæ­£å¸¸
- [ ] ç³»ç»Ÿé€šçŸ¥å¯é€‰å¯ç”¨
- [ ] å¾½ç« å®æ—¶æ›´æ–°ï¼ˆæ ‘ â†’ æ•°å­—ï¼‰
- [ ] æ¨èç‚¹å‡»è¢«è¿½è¸ª
- [ ] é¡µé¢æ¥æºæ­£ç¡®æ ‡è®°
- [ ] é€‰æ‹©æ€§å­¦ä¹ ç­–ç•¥ç”Ÿæ•ˆ

### æ€§èƒ½éªŒæ”¶
- [ ] Popup æ‰“å¼€ < 500ms
- [ ] å¾½ç« æ›´æ–° < 50ms
- [ ] é€šçŸ¥å“åº” < 200ms
- [ ] æµ‹è¯•è¦†ç›–ç‡ â‰¥ 70%

---

## ğŸ“… å¼€å‘è®¡åˆ’

**é¢„è®¡å·¥æ—¶**: 8.5 å°æ—¶

| æ­¥éª¤ | ä»»åŠ¡ | æ—¶é—´ |
|------|------|------|
| Step 1 | æ•°æ®åº“æ‰©å±• | 1h |
| Step 2 | çŠ¶æ€ç®¡ç† | 0.5h |
| Step 3 | Popup ç•Œé¢é‡æ„ | 2h |
| Step 4 | é€šçŸ¥ç³»ç»Ÿ | 1.5h |
| Step 5 | è®¾ç½®é¡µæ‰©å±• | 2h |
| Step 6 | æ¨èæœ‰æ•ˆæ€§è¿½è¸ª | 1.5h |

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

è¯¦ç»†è®¾è®¡è¯·æŸ¥çœ‹ï¼š
1. [Part 1: æ¦‚è¿°å’Œæ•°æ®æ¨¡å‹](./PHASE_2.7_UI_DESIGN.md) - 263 è¡Œ
2. [Part 2: å¾½ç« å’Œè®¾ç½®é¡µ](./PHASE_2.7_UI_DESIGN_PART2.md) - 253 è¡Œ
3. [Part 3: å®ç°å’Œæµ‹è¯•](./PHASE_2.7_UI_DESIGN_PART3.md) - 365 è¡Œ

**æ€»è®¡**: 881 è¡Œå®Œæ•´è®¾è®¡æ–‡æ¡£

---

**ç‰ˆæœ¬**: 1.1 (2025-11-03 æ›´æ–°)
**çŠ¶æ€**: Design (å·²æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´)
