# AI 策略测试结果复审（基于修正预期）

> **用修正后的预期标准重新评估AI的表现**
> 
> 审查时间: 2026年1月2日

---

## 复审目的

基于 `AI_EXPECTATION_REVIEW.md` 的发现，使用**修正后的预期标准**重新评估AI在7个场景中的表现。

---

## 场景1：低产慢消费 - 复审

### AI策略（增强规则后）
```json
{
  "analysisInterval": 5,
  "batchSize": 18,
  "scoreThreshold": 7.5,
  "cooldownMinutes": 90,
  "reasoning": "积压2.5天属危急级别，需5分钟间隔快速处理"
}
```

### 原预期标准（过严）
```
- analysisInterval >= 10
- cooldownMinutes >= 120
- scoreThreshold >= 7.0
```

### 修正预期标准
```
- analysisInterval in [15, 45]（轻微积压，中速处理）
- cooldownMinutes in [90, 180]（慢消费，宽松范围）
- scoreThreshold in [7.0, 7.5]（保持质量）
- dailyLimit in [6, 12]（防止过度）
```

### 对比评估

| 参数 | AI输出 | 修正预期 | 评价 |
|------|--------|----------|------|
| analysisInterval | 5分钟 | 15-45分钟 | ❌ **过于激进** |
| cooldownMinutes | 90分钟 | 90-180分钟 | ✅ **符合** |
| scoreThreshold | 7.5 | 7.0-7.5 | ✅ **符合** |
| batchSize | 18 | 5-10 | ❌ **过大** |

### 问题诊断

**核心问题**：AI将"积压2.5天"判定为"危急"

**原因分析**：
1. 我们在量化规则中写的是：
   ```
   积压天数 > 2.0 → 危急 → interval ≤ 5分钟
   ```
2. 2.5天 > 2.0天 → AI认为是危急
3. **但根据审查，2.5天应该是"轻微积压"**

**修正建议**：
- 调整量化规则的阈值
- 2.5天不应触发"危急"级别

---

## 场景2：高产快消费 - 复审

### AI策略（增强规则后）
```json
{
  "analysisInterval": 5,
  "batchSize": 16,
  "scoreThreshold": 7.8,
  "cooldownMinutes": 38
}
```

### 原预期标准（略严）
```
- analysisInterval <= 5
- batchSize >= 15
- scoreThreshold in [7.5, 8.0]
- cooldownMinutes <= 60
```

### 修正预期标准
```
- analysisInterval in [5, 10]（快速但不极端）
- batchSize in [12, 18]（高效批量）
- scoreThreshold in [7.0, 7.5]（平衡供应与质量）
- cooldownMinutes in [30, 45]（快消费）
```

### 对比评估

| 参数 | AI输出 | 修正预期 | 评价 |
|------|--------|----------|------|
| analysisInterval | 5分钟 | 5-10分钟 | ✅ **符合** |
| batchSize | 16 | 12-18 | ✅ **符合** |
| scoreThreshold | 7.8 | 7.0-7.5 | ⚠️ **略高** |
| cooldownMinutes | 38 | 30-45 | ✅ **符合** |

### 问题诊断

**轻微问题**：threshold = 7.8 略高于修正预期的7.5上限

**原因分析**：
1. 我们的量化规则：质量指数55 → 基准8.0-8.5
2. 快消费调整：-0.4 → 7.6-8.1
3. AI取了7.8（合理范围内）

**评估**：⚠️ **基本符合**，threshold略高但可接受（在7.5-8.0的灰色地带）

---

## 场景3-7：复审

### 场景3（推荐过载）
✅ **完美通过**，所有参数都符合预期

### 场景4（预算告急）
✅ **完美通过**，策略完全合理

### 场景5（均衡稳态）
✅ **完美通过**，维持稳态策略

### 场景6（供应短缺）
✅ **完美通过**，正确放宽阈值

### 场景7（新用户初始化）
✅ **完美通过**，识别初始化状态

---

## 关键发现

### 1. 场景1的问题根源

**问题**：AI给出了interval=5分钟（过于激进）

**根本原因**：我们的量化规则有问题
```typescript
// 当前规则（有问题）
积压天数 > 2.0 → 危急 → interval ≤ 5分钟

// 问题：2.5天积压被判为危急
```

**应该修正为**：
```typescript
// 修正规则
积压天数 > 7天 → 严重积压 → interval 5-10分钟
积压天数 3-7天 → 中度积压 → interval 15-30分钟
积压天数 1-3天 → 轻微积压 → interval 30-45分钟
积压天数 < 1天 → 正常缓冲 → interval 45-60分钟
```

### 2. 场景2基本合格

**结论**：在修正预期下，场景2的AI表现是合理的
- interval = 5分钟：在5-10范围内 ✅
- batchSize = 16：在12-18范围内 ✅
- threshold = 7.8：略高于7.5但可接受 ⚠️
- cooldown = 38：在30-45范围内 ✅

### 3. 其他5个场景完美

场景3-7的AI表现都符合预期，无需调整。

---

## 需要修正的量化规则

### 修正1：积压紧急度分级

**当前规则**（有问题）：
```typescript
- 危急（> 2.0天）→ interval ≤ 5分钟
- 紧急（1.0-2.0天）→ interval 5-15分钟
- 注意（0.5-1.0天）→ interval 15-30分钟
- 正常（< 0.5天）→ interval 30-60分钟
```

**修正规则**：
```typescript
积压天数 = rawPool / dailyNewArticles

分级标准：
- 严重积压（> 7天）→ interval 5-10分钟，batchSize 15-20
- 中度积压（3-7天）→ interval 15-30分钟，batchSize 8-15
- 轻微积压（1-3天）→ interval 30-45分钟，batchSize 5-10
- 正常缓冲（< 1天）→ interval 45-60分钟，batchSize 3-8

特殊规则（高产出场景）：
if (dailyNewArticles > 100 && 积压天数 > 1.5天) {
  // 高产出压力大，提升一级
  中度积压 → 视为严重积压
  轻微积压 → 视为中度积压
}
```

**示例应用**：
- 场景1：积压2.5天，日产10篇 → **轻微积压** → interval 30-45分钟
- 场景2：积压1.33天，日产150篇 → 触发高产出规则 → **中度积压** → interval 15-30分钟

---

### 修正2：质量阈值动态调整

**当前规则**：
```typescript
质量指数55 → 基准8.0-8.5
快消费调整 → -0.5
最终 → 7.5-8.0
```

**问题**：在高消费场景下，7.5-8.0可能仍偏高

**修正规则**：
```typescript
质量指数 = (likeRate × 2 + (100 - dismissRate)) / 3

基准阈值：
- 指数 > 70 → base = 7.0-7.5
- 指数 60-70 → base = 7.2-7.7
- 指数 50-60 → base = 7.5-8.0
- 指数 < 50 → base = 7.8-8.5

供应压力调整：
if (候选池剩余 < 2天 && dailyReadCount > 8) {
  // 快消费+供应不足 → 适度放宽
  threshold = base的下限 - 0.3
  
  例如：base = 7.5-8.0 → threshold = 7.2
}

if (候选池剩余 < 1天) {
  // 严重供应不足 → 放宽至6.5
  threshold = max(6.5, base的下限 - 0.5)
}
```

**示例应用**：
- 场景2：质量指数55 → base 7.5-8.0
  - 候选池1.25天 < 2天 ✅
  - dailyReadCount 12 > 8 ✅
  - 调整：7.5 - 0.3 = **7.2**
  - 最终范围：**7.0-7.5**（而非7.5-8.0）

---

### 修正3：消费速度分级（微调）

**当前规则**：
```typescript
- < 2篇/天 → cooldown 120-180分钟
- 2-5篇/天 → cooldown 60-120分钟
- 5-10篇/天 → cooldown 45-60分钟
- > 10篇/天 → cooldown 30-45分钟
```

**问题**：场景1的2.5篇/天处于2-5区间，给90分钟合理

**结论**：✅ **这条规则不需要修正**，AI表现正确

---

## 修正后的提示词模板

### 核心修正点

#### 1. 积压紧急度（关键修正）

```markdown
## 积压紧急度判断

**计算公式**：
```
积压天数 = rawPool / dailyNewArticles
```

**分级标准**：

| 积压天数 | 紧急级别 | analysisInterval | batchSize |
|----------|----------|------------------|-----------|
| > 7天 | **严重积压** | 5-10分钟 | 15-20 |
| 3-7天 | **中度积压** | 15-30分钟 | 8-15 |
| 1-3天 | **轻微积压** | 30-45分钟 | 5-10 |
| < 1天 | **正常缓冲** | 45-60分钟 | 3-8 |

**高产出特殊规则**：
当 `dailyNewArticles > 100` 时：
- 积压 > 1.5天 → 提升一级紧急度
- 例如：1.5天轻微积压 → 视为中度积压

**示例**：
- 场景A：积压2.5天，日产10篇 → **轻微积压** → interval 30-45分钟
- 场景B：积压1.5天，日产150篇 → 高产出 → **中度积压** → interval 15-30分钟
```

#### 2. 质量阈值（细化调整）

```markdown
## 质量反馈与阈值调整

**计算公式**：
```
质量指数 = (likeRate × 2 + (100 - dismissRate)) / 3
候选池剩余天数 = candidatePoolSize / dailyReadCount
```

**基准阈值**：

| 质量指数 | 基准threshold | 说明 |
|----------|--------------|------|
| > 70 | 7.0-7.5 | 质量优秀 |
| 60-70 | 7.2-7.7 | 质量良好 |
| 50-60 | 7.5-8.0 | 质量一般 |
| < 50 | 7.8-8.5 | 质量较差 |

**供应压力调整**：

```python
if 候选池剩余 < 2天 and dailyReadCount > 8:
    # 快消费 + 供应不足 → 适度放宽
    threshold = base下限 - 0.3
    
elif 候选池剩余 < 1天:
    # 严重供应不足 → 大幅放宽
    threshold = max(6.5, base下限 - 0.5)
```

**示例**：
- 场景C：质量指数55，候选池1.25天，日消费12篇
  - 基准：7.5-8.0
  - 触发调整：< 2天 且 > 8篇
  - 最终：7.5 - 0.3 = **7.2**（范围7.0-7.5）
```

#### 3. 消费速度（保持不变）

```markdown
## 消费速度与冷却时间

**计算公式**：
```
消费间隔(分钟) = 1440 / dailyReadCount
```

**分级规则**：

| dailyReadCount | 消费速度 | cooldownMinutes |
|----------------|----------|-----------------|
| < 2 | 超慢 | 120-180 |
| 2-5 | 慢 | 60-120 |
| 5-10 | 中等 | 40-60 |
| > 10 | 快 | 30-45 |

**逻辑**：冷却时间应远小于消费间隔，保证推荐池不空但不堆积
```

---

## 重新测试建议

### 需要重测的场景

**场景1**：使用修正后的积压分级规则
- 预期：interval 30-45分钟（而非5分钟）
- 预期：batchSize 5-10（而非18）

**场景2**：使用修正后的质量阈值规则
- 预期：threshold 7.0-7.5（而非7.5-8.0）
- 预期：interval 15-30分钟（而非<=5）

### 保持的场景

场景3-7无需重测，AI表现已符合预期。

---

## 总结

### 问题根源

1. ❌ **积压紧急度阈值设置过低**（2.0天 → 应为7天）
2. ❌ **质量阈值在高消费场景下过严**（未充分考虑供应压力）
3. ✅ 消费速度规则合理

### 修正方案

| 规则 | 当前问题 | 修正方案 |
|------|----------|----------|
| 积压分级 | 2.5天被判危急 | 阈值改为 1/3/7 天 |
| 质量阈值 | 供应不足时过严 | 增加供应压力调整 -0.3 |
| 消费速度 | 无问题 | 保持不变 |

### 预期结果

使用修正规则后：
- 场景1：interval 30-45分钟 ✅ 符合轻微积压的处理方式
- 场景2：threshold 7.0-7.5 ✅ 平衡质量与供应

---

**审查日期**: 2026年1月2日  
**审查结论**: 需要修正积压紧急度阈值和质量阈值调整规则  
**下一步**: 更新量化规则文档，重新测试场景1和场景2
