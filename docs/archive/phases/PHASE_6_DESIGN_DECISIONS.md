# Phase 6 è®¾è®¡å†³ç­–è®°å½•

**æ—¥æœŸ**: 2025å¹´11æœˆ12æ—¥  
**å†³ç­–äºº**: ç”¨æˆ· + Copilot

---

## ğŸ“ æ ¸å¿ƒè®¾è®¡å†³ç­–

### 1. ç®€åŒ–æ¨èæ¨¡å¼

**å†³ç­–**: åˆ é™¤"å¿«é€Ÿ/æ™ºèƒ½/æ·±åº¦"ä¸‰ç§æ¨¡å¼é€‰æ‹©ï¼Œç»Ÿä¸€ä½¿ç”¨å…¨æ–‡åˆ†æ

**åŸå› **:
- æ¨èæ˜¯åå°å¼‚æ­¥æœåŠ¡ï¼Œæ—¶æ•ˆæ€§è¦æ±‚ä¸é«˜
- æœ‰å……è¶³æ—¶é—´è¿›è¡Œå…¨æ–‡æŠ“å–å’Œæ·±åº¦åˆ†æ
- å‡å°‘ç”¨æˆ·é€‰æ‹©è´Ÿæ‹…ï¼Œé‡‡ç”¨æœ€ä½³æ–¹æ¡ˆ

**å®ç°**:
- é»˜è®¤æŠ“å–æ‰€æœ‰æ¨èæ–‡ç« çš„å…¨æ–‡å†…å®¹
- è®¡ç®—æ–‡ç« å­—æ•°å’Œé˜…è¯»æ—¶é•¿
- æå–æ‘˜è¦ç”¨äºå±•ç¤º

---

### 2. ç”¨æˆ·å¯é€‰é…ç½®

**å†³ç­–**: ç”¨æˆ·åªéœ€å…³æ³¨ä¸¤ä¸ªå¼€å…³

#### 2.1 æ¨ç†æ¨¡å¼å¼€å…³

```typescript
useReasoning: boolean  // æ˜¯å¦ä½¿ç”¨æ¨ç†æ¨¡å¼
```

**å½±å“**: æˆæœ¬
- å¯ç”¨ï¼šä½¿ç”¨ DeepSeek-R1 ç­‰æ¨ç†æ¨¡å‹ç”Ÿæˆæ¨èç†ç”±ï¼ˆ2-5å€è´¹ç”¨ï¼‰
- ç¦ç”¨ï¼šä½¿ç”¨æ ‡å‡† AI æ¨¡å‹æˆ–è§„åˆ™åŒ¹é…ç”Ÿæˆç†ç”±

**é»˜è®¤**: `false`ï¼ˆæˆæœ¬è€ƒè™‘ï¼‰

#### 2.2 æœ¬åœ° AI å¼€å…³

```typescript
useLocalAI: boolean  // æ˜¯å¦ä½¿ç”¨æœ¬åœ°AI
```

**å½±å“**: éšç§ vs æ€§èƒ½
- å¯ç”¨ï¼šä½¿ç”¨ Ollama æˆ– Chrome AIï¼ˆéšç§ä¿æŠ¤ï¼Œæ— ç½‘ç»œè°ƒç”¨ï¼‰
- ç¦ç”¨ï¼šä½¿ç”¨äº‘ç«¯ AIï¼ˆéœ€è¦ç½‘ç»œï¼Œä½†ä¸å ç”¨æœ¬åœ°èµ„æºï¼‰

**é»˜è®¤**: `false`ï¼ˆæ€§èƒ½è€ƒè™‘ï¼‰

---

### 3. æ™ºèƒ½æ¨èæ•°é‡

**å†³ç­–**: åˆ é™¤æ‰‹åŠ¨è°ƒæ•´æ»‘å—ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¼˜åŒ–

**è‡ªé€‚åº”ç­–ç•¥**:
```typescript
maxRecommendations: number  // 1-5ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´
```

**è°ƒæ•´é€»è¾‘**:
- è·Ÿè¸ªç”¨æˆ·ç‚¹å‡»"ä¸æƒ³è¯»"çš„é¢‘ç‡
- é¢‘ç¹æ¸…ç†ï¼ˆå¤šæ¬¡ç‚¹ä¸æƒ³è¯»ï¼‰â†’ å‡å°‘æ¨èæ•°é‡
- å¾ˆå°‘æ¸…ç†ï¼ˆæ¨èåœç•™æ—¶é—´é•¿ï¼‰â†’ å¢åŠ æ¨èæ•°é‡
- åˆå§‹å€¼ï¼š3æ¡

**å®ç°è®¡åˆ’**:
```typescript
// TODO: Phase 6.2 - å®ç°è‡ªé€‚åº”é€»è¾‘
function adjustRecommendationCount(dismissRate: number) {
  if (dismissRate > 0.7) {
    // æ¸…ç†ç‡>70%ï¼Œå‡å°‘æ¨è
    return Math.max(1, currentCount - 1)
  } else if (dismissRate < 0.3) {
    // æ¸…ç†ç‡<30%ï¼Œå¢åŠ æ¨è
    return Math.min(5, currentCount + 1)
  }
  return currentCount
}
```

---

### 4. æ¨èå†…å®¹å±•ç¤º

**å†³ç­–**: å¿…é¡»åŒ…å«ä¸‰è¦ç´ 

#### 4.1 æ–‡ç« é•¿åº¦
```typescript
wordCount: number  // å­—æ•°ç»Ÿè®¡
```
- æ ¼å¼åŒ–æ˜¾ç¤ºï¼š`4.2kå­—` æˆ– `1.5ä¸‡å­—`

#### 4.2 é˜…è¯»æ—¶é•¿
```typescript
readingTime: number  // é¢„ä¼°åˆ†é’Ÿæ•°
```
- è®¡ç®—å…¬å¼ï¼š`Math.ceil(wordCount / 250)`
- é˜…è¯»é€Ÿåº¦ï¼š250 words/min

#### 4.3 æ¨èç†ç”±
```typescript
reason: string  // AIç”Ÿæˆæˆ–è§„åˆ™åŒ¹é…
```
- ç¤ºä¾‹ï¼š`"å› ä¸ºæ‚¨ç»å¸¸æµè§ˆå‰ç«¯å¼€å‘å’ŒVue.jsç›¸å…³å†…å®¹"`

---

### 5. å·®å¼‚åŒ–å±•ç¤º

**å†³ç­–**: ç¬¬ä¸€æ¡ï¼ˆè¯„åˆ†æœ€é«˜ï¼‰æ˜¾ç¤ºæ‘˜è¦

**å¸ƒå±€è®¾è®¡**:
- ç¬¬ä¸€æ¡ï¼šæ ‡é¢˜ + æ‘˜è¦ + æ¨èç†ç”± + è¯¦ç»†ä¿¡æ¯ï¼ˆé«˜åº¦çº¦ 120pxï¼‰
- å…¶ä»–æ¡ç›®ï¼šæ ‡é¢˜ + åŸºæœ¬ä¿¡æ¯ï¼ˆé«˜åº¦ 80pxï¼‰

**æ‘˜è¦æ¥æº**:
```typescript
excerpt?: string  // ä¼˜å…ˆä½¿ç”¨å…¨æ–‡æå–çš„æ‘˜è¦
summary: string   // é™çº§ä½¿ç”¨RSSæ‘˜è¦
```

---

## ğŸ—ï¸ æ¶æ„å˜æ›´

### é…ç½®æ¨¡å‹é‡æ„

**æ—§é…ç½®** (å·²åˆ é™¤):
```typescript
interface RecommendationConfig {
  maxRecommendations: number
  mode: "fast" | "smart" | "deep"
}
```

**æ–°é…ç½®**:
```typescript
interface RecommendationConfig {
  useReasoning: boolean     // æ¨ç†æ¨¡å¼å¼€å…³
  useLocalAI: boolean       // æœ¬åœ°AIå¼€å…³  
  maxRecommendations: number // ç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´
}
```

---

## ğŸ“¦ æ–°å¢æ¨¡å—

### å…¨æ–‡æŠ“å–å™¨

**æ–‡ä»¶**: `src/core/rss/article-fetcher.ts`

**åŠŸèƒ½**:
- æŠ“å–æ–‡ç« HTMLå†…å®¹
- æå–æ­£æ–‡ï¼ˆç§»é™¤è„šæœ¬ã€å¹¿å‘Šç­‰ï¼‰
- è®¡ç®—å­—æ•°ç»Ÿè®¡
- ä¼°ç®—é˜…è¯»æ—¶é•¿
- ç”Ÿæˆæ‘˜è¦

**æ¥å£**:
```typescript
export interface ArticleContent {
  title: string
  textContent: string
  htmlContent: string
  excerpt: string
  wordCount: number
  readingTime: number
  fetchedAt: number
}

export async function fetchArticleContent(
  url: string
): Promise<ArticleContent | null>
```

**å®ç°è¦ç‚¹**:
- ä½¿ç”¨ DOMParser è§£æ HTML
- ç®€åŒ–çš„æ­£æ–‡æå–ç®—æ³•ï¼ˆæœªæ¥å¯é›†æˆ @mozilla/readabilityï¼‰
- ä¸­è‹±æ–‡æ··åˆå­—æ•°ç»Ÿè®¡

---

## ğŸ¨ UI ä¼˜åŒ–

### æ¨èæ¡ç›®ç»„ä»¶

**ç¬¬ä¸€æ¡ï¼ˆTop Itemï¼‰**:
```tsx
<div className="px-4 py-3 bg-blue-50/30">
  {/* æ ‡é¢˜ - åŒè¡Œ */}
  <h3 className="line-clamp-2">{title}</h3>
  
  {/* æ‘˜è¦ - åŒè¡Œ */}
  <p className="text-xs line-clamp-2">{excerpt}</p>
  
  {/* æ¨èç†ç”± */}
  <p className="text-xs text-blue-700 italic">
    ğŸ’¡ {reason}
  </p>
  
  {/* è¯¦ç»†ä¿¡æ¯ */}
  <div className="flex gap-3">
    <span>ğŸ“¡ {source}</span>
    <span>ğŸ“ {wordCount}</span>
    <span>â±ï¸ {readingTime}åˆ†é’Ÿ</span>
    <span>â­ {score}%</span>
  </div>
</div>
```

**å…¶ä»–æ¡ç›®ï¼ˆCompactï¼‰**:
```tsx
<div className="h-20 px-4 py-2.5">
  {/* æ ‡é¢˜ - åŒè¡Œ */}
  <h3 className="line-clamp-2">{title}</h3>
  
  {/* ç®€åŒ–ä¿¡æ¯ */}
  <div className="flex gap-2">
    <span>ğŸ“¡ {source}</span>
    <span>ğŸ“ {wordCount}</span>
    <span>â±ï¸ {readingTime}min</span>
    <span>{score}%</span>
  </div>
</div>
```

---

## â­ï¸ å¾…å®ç°åŠŸèƒ½

### Phase 6.1: é…ç½®å’ŒUIï¼ˆå·²å®Œæˆ âœ…ï¼‰
- [x] é‡æ„æ¨èé…ç½®æ¨¡å‹
- [x] åˆ›å»ºæ¨èè®¾ç½®ç»„ä»¶
- [x] ä¼˜åŒ–æ¨èå±•ç¤ºç»„ä»¶
- [x] æ›´æ–° mock æ•°æ®

### Phase 6.2: å…¨æ–‡æŠ“å–é›†æˆï¼ˆä¸‹ä¸€æ­¥ â³ï¼‰
- [ ] é›†æˆå…¨æ–‡æŠ“å–åˆ°æ¨èæµç¨‹
- [ ] å®ç°æ‰¹é‡å¼‚æ­¥æŠ“å–
- [ ] ç¼“å­˜æŠ“å–ç»“æœï¼ˆé¿å…é‡å¤è¯·æ±‚ï¼‰
- [ ] é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥

### Phase 6.3: è‡ªé€‚åº”æ¨èæ•°é‡ï¼ˆè®¡åˆ’ä¸­ ğŸ“‹ï¼‰
- [ ] è·Ÿè¸ªç”¨æˆ·"ä¸æƒ³è¯»"è¡Œä¸º
- [ ] å®ç°è°ƒæ•´ç®—æ³•
- [ ] å®šæœŸè¯„ä¼°å’Œè°ƒæ•´
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†

### Phase 6.4: æœ¬åœ°AIé›†æˆï¼ˆè®¡åˆ’ä¸­ ğŸ“‹ï¼‰
- [ ] Ollama é›†æˆ
- [ ] Chrome AI é›†æˆ
- [ ] æœ¬åœ°æ¨ç†æ€§èƒ½ä¼˜åŒ–
- [ ] äº‘ç«¯/æœ¬åœ°åˆ‡æ¢é€»è¾‘

### Phase 6.5: æ¨ç†æ¨¡å¼å®ç°ï¼ˆè®¡åˆ’ä¸­ ğŸ“‹ï¼‰
- [ ] DeepSeek-R1 æ¨ç†æ¥å£
- [ ] æ¨ç†ç»“æœè§£æ
- [ ] æˆæœ¬è¿½è¸ªå’Œé™åˆ¶
- [ ] æ¨ç†vsæ ‡å‡†æ•ˆæœå¯¹æ¯”

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ç”¨æˆ·ä½“éªŒ
- âœ… æ›´å°‘çš„é€‰æ‹©ï¼Œæ›´å¥½çš„é»˜è®¤æ–¹æ¡ˆ
- âœ… ä¸ªæ€§åŒ–çš„æ¨èç†ç”±
- âœ… æ¸…æ™°çš„é˜…è¯»æ—¶é•¿ä¼°è®¡
- âœ… è‡ªåŠ¨ä¼˜åŒ–çš„æ¨èæ•°é‡

### æŠ€æœ¯æŒ‡æ ‡
- æ¨èå‡†ç¡®ç‡ï¼š>70%ï¼ˆåŸºäºç”¨æˆ·ç‚¹å‡»ç‡ï¼‰
- å…¨æ–‡æŠ“å–æˆåŠŸç‡ï¼š>85%
- å¹³å‡æ¨èç”Ÿæˆæ—¶é—´ï¼š<3ç§’ï¼ˆåå°å¼‚æ­¥ï¼‰
- æœ¬åœ°AIå“åº”æ—¶é—´ï¼š<2ç§’

### æˆæœ¬æ§åˆ¶
- é»˜è®¤ä¸ä½¿ç”¨æ¨ç†æ¨¡å¼ï¼ˆèŠ‚çœ 2-5å€æˆæœ¬ï¼‰
- å¯é€‰æœ¬åœ°AIï¼ˆ0æˆæœ¬ï¼‰
- è‡ªé€‚åº”æ¨èæ•°é‡ï¼ˆå‡å°‘æ— æ•ˆæ¨èï¼‰

---

## ğŸ” è®¾è®¡æƒè¡¡

| å†³ç­– | ä¼˜åŠ¿ | åŠ£åŠ¿ | é€‰æ‹©ç†ç”± |
|------|------|------|---------|
| **åˆ é™¤æ¨¡å¼é€‰æ‹©** | ç®€åŒ–UIï¼Œæœ€ä½³æ–¹æ¡ˆ | å¤±å»çµæ´»æ€§ | åå°å¼‚æ­¥ï¼Œæ— éœ€è€ƒè™‘é€Ÿåº¦ |
| **å…¨æ–‡æŠ“å–** | æ›´å‡†ç¡®æ¨è | ç½‘ç»œè¯·æ±‚å¼€é”€ | åå°å¤„ç†ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ |
| **è‡ªé€‚åº”æ•°é‡** | æ™ºèƒ½ä¼˜åŒ– | ç®—æ³•å¤æ‚åº¦ | æå‡é•¿æœŸä½“éªŒ |
| **æœ¬åœ°AIé€‰é¡¹** | éšç§ä¿æŠ¤ | æ€§èƒ½æ¶ˆè€— | ç»™ç”¨æˆ·é€‰æ‹©æƒ |
| **æ¨ç†æ¨¡å¼å¯é€‰** | æˆæœ¬å¯æ§ | è´¨é‡å·®å¼‚ | è®©ç”¨æˆ·å†³å®šæˆæœ¬ |
