# Sprint 1 浏览器测试清单

## 测试环境准备

1. ✅ 构建扩展: `npm run build`
2. ✅ 加载扩展: Chrome → 扩展管理 → 加载已解压的扩展 → 选择 `build/chrome-mv3-prod`
3. ✅ 重新加载扩展（如果已加载）

---

## 测试 1: AI 配置界面

### 1.1 访问 AI 配置页面

**操作**:
1. 右键扩展图标 → 选项
2. 点击左侧 "🤖 AI 配置" 标签

**预期结果**:
- ✅ 能看到 AI 配置界面
- ✅ 显示 "🤖 AI 配置" 标题
- ✅ 显示提供商下拉框（默认"未配置"）
- ✅ 没有显示 API Key 输入框（因为未选择提供商）

---

### 1.2 选择 DeepSeek 提供商

**操作**:
1. 在"AI 提供商"下拉框中选择 "DeepSeek"

**预期结果**:
- ✅ 显示 API Key 输入框
- ✅ 显示"月度预算限制"输入框（默认 $5）
- ✅ 显示提供商说明："国内友好、最便宜"
- ✅ 显示"测试连接"和"保存配置"按钮

---

### 1.3 输入 API Key

**操作**:
1. 在 API Key 输入框输入: `sk-02b27ba7831f479f94b721639901e661`
2. 点击"测试连接"按钮

**预期结果**:
- ✅ 按钮显示"测试中..."（短暂）
- ✅ 显示测试结果消息
- ✅ 绿色成功提示（API Key 格式正确）

---

### 1.4 保存配置

**操作**:
1. 点击"保存配置"按钮

**预期结果**:
- ✅ 按钮显示"保存中..."（短暂）
- ✅ 显示成功消息："✅ 配置保存成功！"
- ✅ 没有错误提示

---

### 1.5 刷新页面验证持久化

**操作**:
1. 刷新页面（F5）
2. 再次访问 AI 配置标签

**预期结果**:
- ✅ Provider 仍然是 "DeepSeek"
- ✅ API Key 输入框有值（password 类型，看不到具体内容）
- ✅ 月度预算仍然是之前设置的值

---

### 1.6 测试预算控制

**操作**:
1. 修改月度预算为 `10`
2. 尝试输入 `0`（无效值）
3. 尝试输入 `150`（超出最大值）

**预期结果**:
- ✅ 可以设置 1-100 范围内的值
- ✅ 输入 0 会自动变为 1（最小值保护）
- ✅ 显示警告提示："⚠️ 建议设置合理预算"

---

### 1.7 禁用 AI

**操作**:
1. 点击"禁用 AI"按钮

**预期结果**:
- ✅ 显示成功消息："✅ 已禁用 AI，将使用关键词分析"
- ✅ Provider 变回"未配置"
- ✅ API Key 输入框消失

---

## 测试 2: AI 状态卡片（数据管理页面）

### 2.1 未配置状态

**操作**:
1. 确保 AI 已禁用（如果没有，重新禁用）
2. 访问 "📊 数据管理" 标签
3. 查看"🤖 AI 分析状态"卡片

**预期结果**:
- ✅ 能看到 AI 分析状态卡片
- ✅ 当前提供商：未配置（灰色）
- ✅ 分析方式：关键词分析（橙色）
- ✅ 连接状态：未配置（灰色圆点）
- ✅ 显示蓝色提示框："想要更准确的内容分析？"
- ✅ 有"前往配置 →"链接

---

### 2.2 已配置状态

**操作**:
1. 返回 AI 配置页面
2. 重新配置 DeepSeek 并保存
3. 返回数据管理页面

**预期结果**:
- ✅ 当前提供商：DeepSeek（绿色）
- ✅ 分析方式：AI 分析（蓝色）
- ✅ 连接状态：已连接（绿色动画圆点）
- ✅ 显示绿色提示框："✅ AI 分析已启用"
- ✅ 蓝色引导提示消失

---

### 2.3 点击"前往配置"链接

**操作**:
1. 禁用 AI（看到引导提示）
2. 点击"前往配置 →"链接

**预期结果**:
- ✅ 页面跳转到 AI 配置标签
- ✅ 可以正常配置 AI

---

## 测试 3: 分析质量指标（用户画像页面）

### 3.1 未配置状态（如果有画像数据）

**操作**:
1. 确保 AI 已禁用
2. 访问 "📊 数据管理" 标签
3. 滚动到"👤 用户画像"部分

**预期结果**:
- ✅ 看到"分析质量"卡片（灰色）
- ✅ 显示："关键词分析"
- ✅ 显示："📝 使用传统关键词提取"
- ✅ 看到渐变提示框："🚀 升级到 AI 分析"
- ✅ 列出 AI 的优势（3个要点）
- ✅ 有"立即配置 AI →"按钮

---

### 3.2 已配置状态

**操作**:
1. 配置 DeepSeek AI
2. 返回用户画像部分

**预期结果**:
- ✅ "分析质量"卡片变为蓝色
- ✅ 显示："AI 分析 (DeepSeek)"
- ✅ 显示："✨ 使用 AI 语义理解"
- ✅ 渐变提示框消失

---

### 3.3 点击"立即配置 AI"按钮

**操作**:
1. 禁用 AI
2. 点击"立即配置 AI →"按钮

**预期结果**:
- ✅ 页面跳转到 AI 配置标签
- ✅ 可以正常配置

---

## 测试 4: 边界情况

### 4.1 不同提供商切换

**操作**:
1. 配置 OpenAI，输入假的 API Key: `sk-test-123456`
2. 保存
3. 切换到 Anthropic，输入假的 API Key: `sk-ant-test-123456`
4. 保存

**预期结果**:
- ✅ 每次保存都成功
- ✅ 状态卡片正确显示当前提供商
- ✅ 切换提供商会覆盖之前的配置（单一配置策略）

---

### 4.2 API Key 格式验证

**操作**:
1. 选择 OpenAI
2. 输入错误格式的 Key: `wrong-key`
3. 点击"测试连接"

**预期结果**:
- ✅ 显示错误消息："❌ API Key 格式不正确"
- ✅ 保存按钮仍然可用（允许保存）

---

### 4.3 空 API Key

**操作**:
1. 选择 DeepSeek
2. 不输入 API Key
3. 尝试保存

**预期结果**:
- ✅ 保存按钮被禁用（disabled）
- ✅ 无法点击保存

---

## 测试 5: 样式和响应式

### 5.1 深色模式

**操作**:
1. 切换系统到深色模式
2. 查看所有页面

**预期结果**:
- ✅ 所有卡片正确显示深色样式
- ✅ 文本可读性好
- ✅ 边框和背景颜色正确

---

### 5.2 窄屏幕

**操作**:
1. 缩小浏览器窗口宽度

**预期结果**:
- ✅ 卡片堆叠布局（grid 变为 1 列）
- ✅ 文本不溢出
- ✅ 按钮大小合适

---

## 问题记录

**发现的问题**:
- [ ] 问题 1: （描述）
- [ ] 问题 2: （描述）

**需要改进**:
- [ ] 改进 1: （描述）
- [ ] 改进 2: （描述）

---

## 测试完成标准

Sprint 1 完成的标准：

- ✅ 所有 5 个测试场景通过
- ✅ 没有 JavaScript 错误
- ✅ 配置能够正确保存和加载
- ✅ 状态卡片正确反映配置状态
- ✅ 所有链接和按钮正常工作
- ✅ 深色模式正常显示
- ✅ 响应式布局正常

**如果通过**：✅ Sprint 1 验收通过，可以开始 Sprint 2（AI 实际调用）

**如果发现问题**：📝 记录问题，我会立即修复
